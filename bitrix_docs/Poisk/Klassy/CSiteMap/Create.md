[Поиск](/api_help/search/index.php)

[Классы](/api_help/search/classes/index.php)

[CSiteMap](/api_help/search/classes/csitemap/index.php)

Create (доступен с 4.0.12)

Create
======

Включить вкладки

Описание и параметры

Примеры использования

### Описание и параметры

```
mixed
CSiteMap::Create(
	string site_id,
	array max_execution_time,
	array NS,
	array arOptions = array()
);Копировать
```

Создание карты сайта в формате Google Sitemap.

Создание всегда происходит в пошаговом режиме. Нестатический метод.

#### Параметры метода

| Параметр | Описание | С версии |
| --- | --- | --- |
| site\_id | Идентификатор сайта для которого будет создаваться карта. |  |
| max\_execution\_time | Элемент этого массива с индексом 0 задает максимальное время одно шага в секундах. А с индексом 1 - максимальное количество записей поискового индекса (рекомендовано задавать не более 5000). |  |
| NS | Начало шага. Передается результат, возвращенный предыдущим вызовом этого метода. |  |
| arOptions | Необязательный параметр. Если содержит ключ FORUM\_TOPICS\_ONLY со значением Y, то при установленном модуле форума в Sitemap попадут не все сообщения, а только те которые начинают новую тему на форуме. Причем дата модификации будет равна дате добавления последнего сообщения в данную тему. | 7.0.3 |

#### Возвращаемое значение

* **false** - в случае возникновения ошибки.
* **true** - успешное создание карты.
* **array** - требуется еще один вызов метода.

### Примеры использования

Построение карты сайта из сценария вызываемого в cron'е.

```
<?
//подключение модуля поиска
if(CModule::IncludeModule('search'))
{
	//В этом массиве будут передаваться данные "прогресса". Он же послужит индикатором окончания исполнения.
	$NS=Array();
	//Задаем максимальную длительность одной итерации равной "бесконечности".
	$sm_max_execution_time = 0;
	//Это максимальное количество ссылок обрабатываемых за один шаг.
	//Установка слишком большого значения приведет к значительным потерям производительности.
	$sm_record_limit = 5000;
	do {
		$cSiteMap = new CSiteMap;
		//Выполняем итерацию создания,
		$NS = $cSiteMap->Create("ru", array($sm_max_execution_time, $sm_record_limit), $NS);
		//Пока карта сайта не будет создана.
	} 
	while(is_array($NS));
}
?>Копировать
```

Новинки документации в соцсетях: