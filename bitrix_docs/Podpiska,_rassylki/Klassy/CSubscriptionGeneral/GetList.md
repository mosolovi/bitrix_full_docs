[Подписка, рассылки](/api_help/subscribe/index.php)

[Классы](/api_help/subscribe/classes/index.php)

[CSubscriptionGeneral](/api_help/subscribe/classes/csubscriptiongeneral/index.php)

GetList (доступен с 3.0.5)

GetList
=======

Включить вкладки

Описание и параметры

Примеры использования

### Описание и параметры

```
CDBResult
CSubscription::GetList(
	array aSort = Array(),
	array arFilter = Array(),
	array arNavStartParams = false
);Копировать
```

Метод выбирает список подписок (подписчиков) по фильтру. Метод статический.

Если параметр aFilter не задан, то сортировки будет выполнена в порядке убывания поля ID.

#### Параметры

| Параметр | Описание | C версии |
| --- | --- | --- |
| aSort | Массив, содержащий признак сортировки в виде наборов "название поля"=>"направление".     Название поля может принимать значение:    * **ID** - идентификатор подписки; * **DATE\_INSERT** - дата добавления; * **DATE\_UPDATE** - дата изменения; * **DATE\_CONFIRM** - дата подтверждения; * **ACT** - флаг активности; * **CONF** - флаг подтверждения; * **EMAIL** - адрес подписки; * **FMT** - формат подписки; * **USER** - идентификатор пользователя. * **CONFIRM\_CODE** - код подтверждения подписки. * Направление сортировки может принимать значение: * **ASC** - по возрастанию; * **DESC** - по убыванию.  Например: `array("EMAIL"=>"ASC", "ACT"=>"DESC")` |  |
| arFilter | Массив, содержащий фильтр в виде наборов "название поля"=>"значение фильтра".     Название поля может принимать значение:    * 1**ID** - идентификатор подписки; * 1**EMAIL** - адрес; * **UPDATE\_1** - дата модификации (начало периода); * **UPDATE\_2** - дата модификации (конец периода); * **INSERT\_1** - дата добавления (начало периода); * **INSERT\_2** - дата добавления (конец периода); * 2**USER** - пользователь; * 1**USER\_ID** - идентификатор пользователя; * **ANONYMOUS** - флаг анонимности подписки; * **CONFIRMED** - флаг подтверждения подписки; * **ACTIVE** - флаг активности подписки; * **FORMAT** - формат подписки; * **RUBRIC** - рубрики подписки в виде массива идентификаторов или строки, сформированной по правилам логики фильтра.  Например: `array("CONFIRMED"=>"Y", "ACTIVE"=>"Y")`   1 - допускаются [сложные условия](/api_help/main/general/filter.php)   2 - допускаются [сложные условия](/api_help/main/general/filter.php) по полям пользователя ID, LOGIN, NAME, LAST\_NAME |  |
| arNavStartParams | Параметры для постраничной навигации и ограничения количества выводимых элементов. массив вида "Название параметра"=>"Значение", где название параметра     "bShowAll" - разрешить вывести все элементы при постраничной навигации   "iNumPage" - номер страницы при постраничной навигации   "nPageSize" - количество элементов на странице при постраничной навигации     Необязательное. По умолчанию false - не ограничивать выборку. | 8.5.3 |

#### Возвращаемые значения

Возвращается результат запроса типа [CDBResult](/api_help/main/reference/cdbresult/index.php). При выборке из результата методами класса CDBResult становятся доступны [поля объекта "Подписка"](/api_help/subscribe/classes/csubscriptiongeneral/csubscriptiongeneralfields.php).

### Примеры использования

```
//в какие рубрики отправлять
$aPostRub = array();
$post_rub = CPosting::GetRubricList($post_arr["ID"]);
while($post_rub_arr = $post_rub->Fetch())
	$aPostRub[] = $post_rub_arr["ID"];
//активные и подтвержденные адреса, подписанные на рубрики
$subscr = CSubscription::GetList(
	array("ID"=>"ASC"),
	array("RUBRIC"=>$aPostRub, "CONFIRMED"=>"Y", "ACTIVE"=>"Y",
		"FORMAT"=>$post_arr["SUBSCR_FORMAT"], "EMAIL"=>$post_arr["EMAIL_FILTER"])
);
while(($subscr_arr = $subscr->Fetch()))
	$aEmail[] = $subscr_arr["EMAIL"];Копировать
```

Новинки документации в соцсетях: