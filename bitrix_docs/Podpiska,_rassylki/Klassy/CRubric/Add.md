[Подписка, рассылки](/api_help/subscribe/index.php)

[Классы](/api_help/subscribe/classes/index.php)

[CRubric](/api_help/subscribe/classes/crubric/index.php)

Add (доступен с 5.0.2)

Add
===

Включить вкладки

Описание и параметры

Примеры использования

### Описание и параметры

```
int
CRubric::Add(
	array arFields
);Копировать
```

Метод добавляет рассылку. При этом если рассылка активна и является автоматической, то в случае соответствующей настроки модуля (метод генерации не cron) добляется агент для генерации выпусков. Метод нестатический.

#### Параметры

| Параметр | Описание | C версии |
| --- | --- | --- |
| arFields | Массив со значениями [полей объекта "Рассылка"](/api_help/subscribe/classes/crubric/crubric.fields.php). |  |

#### Требования к полям, передаваемым в arFields

* NAME - не должно быть пустым.
* LID - не должно быть пустым и должно содержать корректный идентификатор сайта.
* DAYS\_OF\_MONTH - может быть пустым или должно содержать корректный список дней месяца вида (DD|DD-DD)[[,(DD|DD-DD)],...].
* DAYS\_OF\_WEEK - может быть пустым или должно содержать корректный список дней недели вида DD[[,DD],...].
* TIMES\_OF\_DAY - может быть пустым или должно содержать корректный список времен вида HH:MM[[,HH:MM],...].
* TEMPLATE - может быть пустым или должно содержать корректный идентификатор шаблона.
* LAST\_EXECUTED - может быть пустым или должно содержать корректное значение времени.
* AUTO - если задано и равно "Y", то должны быть заданы DAYS\_OF\_MONTH или DAYS\_OF\_WEEK, а также TIMES\_OF\_DAY и LAST\_EXECUTED. И еще поле FROM\_FIELD должно содержать правильный адрес e-mail (см. функцию [check\_email](/api_help/main/functions/other/check_email.php)).

#### Возвращаемые значения

В случае успешного добавления возвращается ID рассылки. В противном случает возвращается false,
и переменная класса LAST\_ERROR содержит сообщение об ошибке.

### Примеры использования

```
$rubric = new CRubric;
$arFields = Array(
	"ACTIVE" => ($ACTIVE <> "Y"? "N":"Y"),
	"NAME" => $NAME,
	"SORT" => $SORT,
	"DESCRIPTION" => $DESCRIPTION,
	"LID" => $LID
);
$ID = $rubric->Add($arFields);
if($ID == false)
	echo $rubric->LAST_ERROR;Копировать
```

Новинки документации в соцсетях: