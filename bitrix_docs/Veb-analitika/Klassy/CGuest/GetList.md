[Веб-аналитика](/api_help/statistic/index.php)

[Классы](/api_help/statistic/classes/index.php)

[CGuest](/api_help/statistic/classes/cguest/index.php)

GetList

GetList
=======

Включить вкладки

Описание и параметры

Смотрите также

Структура возвращаемой записи

Примеры использования

### Описание и параметры

```
CDBResult
CGuest::GetList(
	string &by = "s_last_date",
	string &order = "desc",
	array filter = array(),
	bool &is_filtered
)Копировать
```

Возвращает список [посетителей](/api_help/statistic/terms.php#guest).

#### Параметры метода

| Параметр | Описание |
| --- | --- |
| *by* | Поле для сортировки. Возможные значения:  * **s\_id** - ID посетителя; * **s\_events** - суммарное кол-во [событий](/api_help/statistic/terms.php#event) сгенерированных посетителем; * **s\_sessions** - суммарное кол-во [сессий](/api_help/statistic/terms.php#session) посетителя; * **s\_hits** - суммарное кол-во [хитов](/api_help/statistic/terms.php#hit) посетителя; * **s\_first\_site\_id** - ID сайта на который впервые пришел посетитель; * **s\_first\_date** - время первого захода на сайт; * **s\_first\_url\_from** - страница с которой впервые пришел посетитель; * **s\_first\_url\_to** - страница куда впервые пришел посетитель; * **s\_first\_adv\_id** - ID [рекламной кампании](/api_help/statistic/terms.php#adv) первого захода; * **s\_last\_site\_id** - ID сайта последнего захода посетителя; * **s\_last\_date** - время последнего захода поестителя; * **s\_last\_user\_id** - ID пользователя; * **s\_last\_url\_last** - последняя страница на которую заходил посетитель; * **s\_last\_user\_agent** - [UserAgent](/api_help/statistic/terms.php#user_agent) посетителя на последнем заходе; * **s\_last\_ip** - [IP адрес](/api_help/statistic/terms.php#ip) посетителя на последнем заходе; * **s\_last\_adv\_id** - ID рекламной кампании на последнем заходе; * **s\_last\_country\_id** - ID страны посетителя на последнем заходе. |
| *оrder* | Порядок сортировки. Возможные значения:  * **asc** - по возрастанию; * **desc** - по убыванию. |
| *filter* | Массив для фильтрации результирующего списка. В массиве допустимы следующие ключи:  * **ID**\* - ID посетителя; * **ID\_EXACT\_MATCH** - если значение равно "N", то при фильтрации по **ID** будет искаться вхождение; * **REGISTERED** - был ли посетитель когда либо авторизован на сайте, возможные значения:   + **Y** - был;   + **N** - не был. * **FIRST\_DATE1** - начальное значение интервала для поля "дата первого захода на сайт"; * **FIRST\_DATE2** - конечное значение интервала для поля "дата первого захода на сайт"; * **LAST\_DATE1** - начальное значение интервала для поля "дата последнего захода на сайт"; * **LAST\_DATE2** - конечное значение интервала для поля "дата первого захода на сайт"; * **PERIOD\_DATE1** - начальное значение интервала для даты посещения посетителем сайта; * **PERIOD\_DATE2** - конечно значение интервала для даты посещения посетителем сайта; * **SITE\_ID**\* - ID сайта первого либо последнего захода; * **SITE\_ID\_EXACT\_MATCH** - если значение равно "N", то при фильтрации по **SITE\_ID** будет искаться вхождение; * **FIRST\_SITE\_ID**\* - ID сайта первого захода; * **FIRST\_SITE\_ID\_EXACT\_MATCH** - если значение равно "N", то при фильтрации по **FIRST\_SITE\_ID** будет искаться вхождение; * **LAST\_SITE\_ID**\* - ID сайта последнего захода; * **LAST\_SITE\_ID\_EXACT\_MATCH** - если значение равно "N", то при фильтрации по **LAST\_SITE\_ID** будет искаться вхождение; * **URL**\* - страница откуда впервые пришел посетитель, страница на которую впервые пришел посетитель и последняя страница просмотренная посетителем; * **URL\_EXACT\_MATCH** - если значение равно "Y", то при фильтрации по **URL** будет искаться точное совпадение; * **URL\_404** - была ли [404 ошибка](/api_help/statistic/terms.php#404) на первой странице или на последней странице посещенной посетителем, возможные значения:   + **Y** - была;   + **N** - не было. * **USER\_AGENT**\* - UserAgent посетителя на последнем заходе; * **USER\_AGENT\_EXACT\_MATCH** - если значение равно "Y", то при фильтрации по **USER\_AGENT** будет искаться точное совпадение; * **ADV** - флаг "приходил ли посетитель когда либо по рекламной кампании (не равной NA/NA)", возможные значения:   + **Y** - посетитель приходил по какой либо рекламной кампании (не равной NA/NA);   + **N** - не приходил никогда ни по одной рекламной кампании (не равной NA/NA). * **ADV\_ID** - ID рекламной кампании первого либо последнего захода посетителя (при этом это мог быть как [прямой заход](/api_help/statistic/terms.php#adv_first) так и [возврат](/api_help/statistic/terms.php#adv_back) по рекламной кампании); * **REFERER1**\* - [идентификатор](/api_help/statistic/terms.php#adv_id) referer1 рекламной кампании первого либо последнего захода посетителя; * **REFERER1\_EXACT\_MATCH** - если значение равно "Y", то при фильтрации по **REFERER1** будет искаться точное совпадение; * **REFERER2**\* - идентификатор referer2 рекламной кампании первого либо последнего захода посетителя; * **REFERER2\_EXACT\_MATCH** - если значение равно "Y", то при фильтрации по **REFERER2** будет искаться точное совпадение; * **REFERER3**\* - [дополнительный параметр](/api_help/statistic/terms.php#adv_referer3) referer3 рекламной кампании первого либо последнего захода посетителя; * **REFERER3\_EXACT\_MATCH** - если значение равно "Y", то при фильтрации по **REFERER3** будет искаться точное совпадение; * **EVENTS1** - начальное значение для интервала кол-ва событий сгенерированных посетителем; * **EVENTS2** - конечное значение для интервала кол-ва событий сгенерированных посетителем; * **SESS1** - начальное значение для интервала кол-ва сессий сгенерированных посетителем; * **SESS2** - конечное значение для интервала кол-ва сессий сгенерированных посетителем; * **HITS1** - начальное значение для интервала кол-ва хитов сгенерированных посетителем; * **HITS2** - конечное значение для интервала кол-ва хитов сгенерированных посетителем; * **FAVORITES** - флаг "добавлял ли посетитель сайт в "[Избранное](/api_help/statistic/terms.php#favorites)"", возможные значения:   + **Y** - добавлял;   + **N** - не добавлял. * **IP** - IP адрес посетителя сайта в последнем заходе; * **LANG** - [языки установленные в настройках браузера](/api_help/statistic/terms.php#browser_lang) посетителя в последнем заходе; * **COUNTRY\_ID**\* - ID страны (двухсимвольный идентификатор) посетителя в последнем заходе; * **COUNTRY\_ID\_EXACT\_MATCH** - если значение равно "Y", то при фильтрации по **COUNTRY\_ID** будет искаться точное совпадение; * **COUNTRY**\* - название страны; * **COUNTRY\_EXACT\_MATCH** - если значение равно "Y", то при фильтрации по **COUNTRY** будет искаться точное совпадение; * **USER**\* - ID, логин, имя, фамилия [пользователя](/api_help/statistic/terms.php#user), под которыми посетитель последний раз   был авторизован; * **USER\_EXACT\_MATCH** - если значение равно "Y", то при фильтрации по **USER** будет искаться точное совпадение; * **USER\_ID**\* - ID пользователя, под которым посетитель последний раз   был авторизован; * **USER\_ID\_EXACT\_MATCH** - если значение равно "Y", то при фильтрации по **USER\_ID** будет искаться точное совпадение.    \* - допускается [сложная логика](/api_help/main/general/filter.php) |
| *is\_filtered* | Флаг отфильтрованности списка посетителей. Если значение равно "true", то список был отфильтрован. |

### Смотрите также

* [Термин "Посетитель"](/api_help/statistic/terms.php#guest)

### Структура возвращаемой записи

```
Array
(
	[ID] => ID посетителя
	[FAVORITES] => [Y|N] флаг добавления сайта в "Избранное"
	[C_EVENTS] => количество событий сгенерированных данным посетителей
	[SESSIONS] => количество сессий данного посетителя
	[HITS] => количество хитов данного посетителя
	[FIRST_SESSION_ID] => ID сессии первого захода на сайт
	[FIRST_DATE] => время первого захода на сайт
	[FIRST_URL_FROM] => адрес страницы с которой посетитель впервые пришел на сайт
	[FIRST_URL_TO] => адрес страницы сайта на которую посетитель впервые пришел
	[FIRST_URL_TO_404] => флаг 404 ошибки (страница не существует) на странице сайта на которую посетитель впервые пришел
	[FIRST_SITE_ID] => ID сайта на который посетитель впервые пришел
	[FIRST_ADV_ID] => ID рекламной кампании по которой посетитель впервые пришел на сайт
	[FIRST_REFERER1] => идентификатор referer1 рекламной кампании FIRST_ADV_ID
	[FIRST_REFERER2] => идентификатор referer2 рекламной кампании FIRST_ADV_ID
	[FIRST_REFERER3] => дополнительный параметр referer3 рекламной кампании FIRST_ADV_ID
	[LAST_SESSION_ID] => ID сессии последнего захода на сайт
	[LAST_DATE] => время последнего захода на сайт
	[LAST_USER_ID] => ID пользователя
	[LAST_USER_AUTH] => [Y|N] был ли авторизован посетитель в последнем заходе на сайт
	[LAST_URL_LAST] => адрес последней страницы на которую зашел посетитель
	[LAST_URL_LAST_404] => флаг 404 ошибки (страница не существует) на последней странице сайта на которую зашел посетитель
	[LAST_USER_AGENT] => UserAgent посетителя в последнем заходе
	[LAST_IP] => IP адрес посетителя сайта в последнем заходе
	[LAST_LANGUAGE] => языки установленные в настройках браузера посетителя в последнем заходе
	[LAST_ADV_ID] => ID рекламной кампании по которой посетитель пришел на сайт в последнем заходе
	[LAST_ADV_BACK] => [Y|N] флаг того был ли это возврат (Y) или прямой заход (N) по рекламной кампании LAST_ADV_ID
	[LAST_REFERER1] => идентификатор referer1 рекламной кампании LAST_ADV_ID
	[LAST_REFERER2] => идентификатор referer2 рекламной кампании LAST_ADV_ID
	[LAST_REFERER3] => дополнительный параметр referer3 рекламной кампании LAST_ADV_ID
	[LAST_SITE_ID] => ID сайта последнего захода
	[LAST_COUNTRY_ID] => ID страны посетителя в последнем заходе
	[LAST_COUNTRY_NAME] => название страны посетителя в последнем заходе (если установлено filter["COUNTRY_ID"])
)Копировать
```

### Примеры использования

```
<?
// выберем только тех посетителей UserAgent которых содержит "Opera"
$arFilter = array(
	"USER_AGENT" => "Opera"
);
// получим список записей
$rs = CGuest::GetList(
	($by = "s_id"), 
	($order = "desc"), 
	$arFilter, 
	$is_filtered
);
// выведем все записи
while ($ar = $rs->Fetch())
{
	echo "<pre>"; print_r($ar); echo "</pre>";    
}
?>Копировать
```

Новинки документации в соцсетях: