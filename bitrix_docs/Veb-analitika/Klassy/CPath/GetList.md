[Веб-аналитика](/api_help/statistic/index.php)

[Классы](/api_help/statistic/classes/index.php)

[CPath](/api_help/statistic/classes/cpath/index.php)

GetList

GetList
=======

Включить вкладки

Описание и параметры

Смотрите также

Структура возвращаемой записи

Примеры использования

### Описание и параметры

```
CDBResult
CPath::GetList(
	int parent_id = "",
	string counter_type = "COUNTER_FULL_PATH",
	string &by = "s_counter",
	string &order = "desc",
	array filter = array(),
	bool &is_filtered
)Копировать
```

Возвращает данные из таблицы, хранящей статистическую информацию как по [полным путям](/api_help/statistic/terms.php#path), так и по [отрезкам путей](/api_help/statistic/terms.php#path_step) в разрезе по дням.

#### Параметры метода

| Параметр | Описание |
| --- | --- |
| *parent\_id* | ID "родительского" отрезка пути (предшествовавшему текущему). |
| *counter\_type* | Тип счетчика, возможные значения:  * **COUNTER\_FULL\_PATH** - количество переходов по полному пути; * **COUNTER** - количество переходов по отрезку пути. |
| *by* | Поле для сортировки. Возможные значения:  * **s\_counter** - значение счетчика тип которого задается в *counter\_type*; * **s\_last\_page** - последняя страница отрезка пути (используется только если *counter\_type*=**COUNTER**); * **s\_pages** - набор всех страниц полного пути (используется только если *counter\_type*=**COUNTER\_FULL\_PATH**). |
| *оrder* | Порядок сортировки. Возможные значения:  * **asc** - по возрастанию; * **desc** - по убыванию. |
| *filter* | Массив для фильтрации результирующего списка. В массиве допустимы следующие ключи:  * **PATH\_ID**\* - ID отрезка пути; * **PATH\_ID\_EXACT\_MATCH** - если значение равно "N", то при фильтрации по **PATH\_ID** будет искаться вхождение; * **DATE1** - начальное значение для интервала даты; * **DATE2** - конечное значение для интервала даты; * **FIRST\_PAGE**\* - первая страница пути; * **FIRST\_PAGE\_EXACT\_MATCH** - если значение равно "Y", то при фильтрации по **FIRST\_PAGE** будет искаться точное совпадение; * **FIRST\_PAGE\_SITE\_ID** - ID сайта первой страницы пути; * **FIRST\_PAGE\_SITE\_ID\_EXACT\_MATCH** - если значение равно "N", то при фильтрации по **FIRST\_PAGE\_SITE\_ID** будет искаться вхождение; * **FIRST\_PAGE\_404** - была ли [404 ошибка](/api_help/statistic/terms.php#404) на первой странице пути, возможные значения:   + **Y** - была;   + **N** - не была. * **LAST\_PAGE**\* - последняя страница пути; * **LAST\_PAGE\_EXACT\_MATCH** - если значение равно "Y", то при фильтрации по **LAST\_PAGE** будет искаться точное совпадение; * **LAST\_PAGE\_SITE\_ID**\* - ID сайта последней страницы пути; * **LAST\_PAGE\_SITE\_ID\_EXACT\_MATCH** - если значение равно "N", то при фильтрации по **LAST\_PAGE\_SITE\_ID** будет искаться вхождение; * **LAST\_PAGE\_404** - была ли [404 ошибка](/api_help/statistic/terms.php#404) на последней странице пути, возможные значения:   + **Y** - была;   + **N** - не была. * **PAGE**\* - произвольная страница пути * **PAGE\_EXACT\_MATCH** - если значение равно "N", то при фильтрации по **PAGE** будет искаться вхождение * **PAGE\_SITE\_ID** - ID сайта произвольной страницы пути * **PAGE\_404** - была ли [404 ошибка](/api_help/statistic/terms.php#404) на произвольной странице пути, возможные значения:   + **Y** - была   + **N** - не была. * **ADV**\* - ID рекламной кампании, по посетителям которой надо получить данные; * **ADV\_EXACT\_MATCH** - если значение равно "N", то при фильтрации по **ADV** будет искаться вхождение; * **ADV\_DATA\_TYPE** - флаг типа данных для рекламной кампании, возможные значения:   + **P** - только по [прямым заходам](/api_help/statistic/terms.php#adv_first) по рекламной кампании;   + **B** - только по [возвратам](/api_help/statistic/terms.php#adv_back) по рекламной кампании;   + **S** - сумма по прямым заходам и возвратам. * **STEPS1** - начальное значение интервала для поля "количество страниц в пути"; * **STEPS2** - конечное значение интервала для поля "количество страниц в пути".  \* - допускается [сложная логика](/api_help/main/general/filter.php) |
| *is\_filtered* | Флаг отфильтрованности списка записей. Если значение равно "true", то список был отфильтрован. |

### Смотрите также

* [Термин "Полный путь"](/api_help/statistic/terms.php#path)
* [Термин "Отрезок пути"](/api_help/statistic/terms.php#path_step)

### Структура возвращаемой записи

В зависимости от типа счетчика (*counter\_type*), структура возвращаемой записи различная.

* если *counter\_type* = **COUNTER**:

  ```
  Array(
  	[PATH_ID] => ID отрезка пути
  	[LAST_PAGE] => последняя страница отрезка пути
  	[LAST_PAGE_404] => [Y|N] флаг 404 ошибки  на последней странице пути
  	[LAST_PAGE_SITE_ID] => ID сайта последней страницы пути
  	[COUNTER] => количество переходов по отрезку пути
  )Копировать
  ```
* если *counter\_type* = **COUNTER\_FULL\_PATH**:

  ```
  Array(
  	[PATH_ID] => ID пути
  	[PAGES] => набор страниц входящих в полный путь
  	[COUNTER] => количество переходов по полному пути
  )Копировать
  ```

### Примеры использования

```
<?
// выберем данные по полным путям пройденных посетителями
// рекламной кампании #1 или #2
$arFilter = array(
	"ADV" => "1 | 2"
);
// получим список записей
$rs = CPath::GetList(
	"",
	"COUNTER_FULL_PATH",
	($by = "s_counter"), 
	($order = "desc"), 
	$arFilter, 
	$is_filtered
);
// выведем все записи
while ($ar = $rs->Fetch())
{
	echo "<pre>"; print_r($ar); echo "</pre>";    
}
?>Копировать
```

Новинки документации в соцсетях: