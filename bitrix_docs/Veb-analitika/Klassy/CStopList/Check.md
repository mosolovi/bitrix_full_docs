[Веб-аналитика](/api_help/statistic/index.php)

[Классы](/api_help/statistic/classes/index.php)

[CStopList](/api_help/statistic/classes/cstoplist/index.php)

Check

Check
=====

Включить вкладки

Описание и параметры

Смотрите также

Примеры использования

### Описание и параметры

```
mixed
CStopList::Check(
	string test = "N",
	mixed params = false
)Копировать
```

Выполняет проверку на попадание текущего [посетителя](/api_help/statistic/terms.php#guest) под условия [записей](/api_help/statistic/terms.php#stop_list_record) [стоп-листа](/api_help/statistic/terms.php#stop_list). Данный метод автоматически вызывается в прологе на каждом [хите](/api_help/statistic/terms.php#hit).

#### Параметры метода

| Параметр | Описание |
| --- | --- |
| *test* | При управлении стоп-листом существует вероятность занести самого себя в стоп-лист. Для исключения подобных ситуаций, система сначала добавляет в стоп-лист *тестовую запись*, проверяет текущего посетителя на попадание в стоп-лист по этой *тестовой записи* и если посетитель не пападает под нее, то она удаляется.   Если вызвать данный метод с параметром *test*="Y", она проверит попадание текущего посетителя только под *тестовые записи* стоп-листа. Если же метод вызывается с параметром *test*="N" (значение по умолчанию), то он будет проверять попадание посетителя уже под все записи стоп-листа, за исключением *тестовых.* |
| *params* | Здесь можно задать массив параметров для которых будет произведена проверка на попадание в стоп-лист. Ключами данного массива могут быть:  * **IP** - [IP адрес](/api_help/statistic/terms.php#ip) в формате XXX.XXX.XXX.XXX; * **USER\_AGENT** - [UserAgent](/api_help/statistic/terms.php#user_agent) (полный, либо его часть); * **URL\_FROM** - [ссылающаяся страница](/api_help/statistic/terms.php#referer); * **URL\_TO** - страница на которую приходит посетитель; * **SITE\_ID** - ID сайта. |

#### Возвращаемое значение

Метод возвращает ID записи стоп-листа под которую попал посетитель, либо "false" в противном случае.

### Смотрите также

* [Термин "Стоп-лист"](/api_help/statistic/terms.php#stop_list)
* [Термин "Маска подсети для стоп-листа"](/api_help/statistic/terms.php#stop_list_mask)

### Примеры использования

```
<?
// зададим параметры посетителя для которых мы хотим проверить попадание в стоп-лист
$arParams = array(
	"IP" => "192.168.0.1",
	"USER_AGENT" => "Firefox"
);
$record_id = CStopList::Check("N", $arParams);
if (intval($record_id)>0) 
	echo "Попадание в стоп-лист под параметры записи #".intval($record_id);
?>Копировать
```

Новинки документации в соцсетях: