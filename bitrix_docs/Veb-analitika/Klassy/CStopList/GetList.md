[Веб-аналитика](/api_help/statistic/index.php)

[Классы](/api_help/statistic/classes/index.php)

[CStopList](/api_help/statistic/classes/cstoplist/index.php)

GetList

GetList
=======

Включить вкладки

Описание и параметры

Смотрите также

Структура возвращаемой записи

Примеры использования

### Описание и параметры

```
CDBResult
CStopList::GetList(
	string &by = "s_id",
	string &order = "desc",
	array filter = array(),
	bool &is_filtered
)Копировать
```

Возвращает список [записей](/api_help/statistic/terms.php#stop_list_record) [стоп-листа](/api_help/statistic/terms.php#stop_list).

#### Параметры метода

| Параметр | Описание |
| --- | --- |
| *by* | Поле для сортировки. Возможные значения:  * **s\_id** - ID записи; * **s\_date\_start** - время начала активности записи; * **s\_date\_end** - время окончания активности записи ; * **s\_site\_id** - ID сайта для которого действительна записи; * **s\_active** - флаг активности записи; * **s\_save\_statistic** - флаг необходимости сохранять статистику по [посетителю](/api_help/statistic/terms.php#guest) попавшему в стоп-лист; * **s\_ip** - [IP адрес](/api_help/statistic/terms.php#ip) посетителя; * **s\_mask** - [маска](/api_help/statistic/terms.php#stop_list_mask) IP адреса посетителя; * **s\_url\_to** - страница на которую приходит посетитель; * **s\_url\_from** - [ссылающаяся страница](/api_help/statistic/terms.php#referer), с которой приходит посетитель. |
| *оrder* | Порядок сортировки. Возможные значения:  * **asc** - по возрастанию; * **desc** - по убыванию. |
| *filter* | Массив для фильтрации результирующего списка. В массиве допустимы следующие ключи:  * **ID**\* - ID записи стоп-листа; * **ID\_EXACT\_MATCH** - если значение равно "N", то при фильтрации по **ID** будет искаться вхождение; * **DATE\_START\_1** - начальное значение интервала для поля "время начала активности записи"; * **DATE\_START\_2** - конечное значение интервала для поля "время начала активности записи"; * **DATE\_END\_1** - начальное значение интервала для поля "время окончания активности записи"; * **DATE\_END\_2** - конечное значение интервала для поля "время окончания активности записи"; * **ACTIVE** - флаг активности записи, воможные значения:   + **Y** - запись активна;   + **N** - запись не активна. * **SAVE\_STATISTIC** - флаг необходимости сохранения статистики по посетителю попавшему в стоп-лист, воможные значения:   + **Y** - статистику сохранять;   + **N** - статистику не сохранять. * **IP\_1**\* - [октет](/api_help/statistic/terms.php#ip_oktet) 1 IP адреса; * **IP\_1\_EXACT\_MATCH** - если значение равно "N", то при фильтрации по **IP\_1** будет искаться вхождение; * **IP\_2**\* - октет 2 IP адреса; * **IP\_2\_EXACT\_MATCH** - если значение равно "N", то при фильтрации по **IP\_2** будет искаться вхождение; * **IP\_3**\* - октет 3 IP адреса; * **IP\_3\_EXACT\_MATCH** - если значение равно "N", то при фильтрации по **IP\_3** будет искаться вхождение; * **IP\_4**\* - октет 4 IP адреса; * **IP\_4\_EXACT\_MATCH** - если значение равно "N", то при фильтрации по **IP\_4** будет искаться вхождение; * **URL\_FROM**\* - ссылающаяся страница, с которой приходит посетитель; * **URL\_FROM\_EXACT\_MATCH** - если значение равно "Y", то при фильтрации по **URL\_FROM** будет искаться точное совпадение; * **USER\_AGENT**\* - [UserAgent](/api_help/statistic/terms.php#user_agent) посетителя; * **USER\_AGENT\_EXACT\_MATCH** - если значение равно "Y", то при фильтрации по **USER\_AGENT** будет искаться точное совпадение; * **MESSAGE**\* - текст сообщения которое будет выдано посетителю сайта, в случае его попадания под данную запись стоп-листа; * **MESSAGE\_EXACT\_MATCH** - если значение равно "Y", то при фильтрации по **MESSAGE** будет искаться точное совпадение; * **COMMENTS**\* - административный комментарий, используется как правило для указания причин создания данной записи; * **COMMENTS\_EXACT\_MATCH** - если значение равно "Y", то при фильтрации по **COMMENTS** будет искаться точное совпадение; * **URL\_TO**\* - страница (или ее часть) на которую приходит посетитель; * **URL\_TO\_EXACT\_MATCH** - если значение равно "Y", то при фильтрации по **URL\_TO** будет искаться точное совпадение; * **URL\_REDIRECT**\* - страница на которую необходимо перенаправить посетителя после его попадания под данную запись стоп-листа; * **URL\_REDIRECT\_EXACT\_MATCH** - если значение равно "Y", то при фильтрации по **URL\_REDIRECT** будет искаться точное совпадение; * **SITE\_ID**\* - ID сайта для которого запись будет действительна; если значение не задано, то это означает что запись действительная для всех сайтов; * **SITE\_ID\_EXACT\_MATCH** - если значение равно "N", то при фильтрации по **SITE\_ID** будет искаться вхождение.  \* - допускается [сложная логика](/api_help/main/general/filter.php) |
| *is\_filtered* | Флаг отфильтрованности результирующего списка. Если значение равно "true", то список был отфильтрован. |

### Смотрите также

* [Термин "Стоп-лист"](/api_help/statistic/terms.php#stop_list)

### Структура возвращаемой записи

```
Array
(
	[DATE_START] => время с которого запись начинает действовать
	[DATE_END] => время после которого действие записи заканчивается
	[ACTIVE] => "Y" - запись активна; "N" - запись не активна
	[SAVE_STATISTIC] => "Y" - сохранять статистику по посетителю, попавшему в стоп-лист; "N" - не сохранять подобную статистику
	[IP_1] => октет 1 IP адреса
	[IP_2] => октет 2 IP адреса
	[IP_3] => октет 3 IP адреса
	[IP_4] => октет 4 IP адреса
	[MASK_1] => маска для октета 1 IP адреса
	[MASK_2] => маска для октета 2 IP адреса
	[MASK_3] => маска для октета 3 IP адреса
	[MASK_4] => маска для октета 4 IP адреса
	[USER_AGENT] => UserAgent посетителя
	[USER_AGENT_IS_NULL] => "Y" - UserAgent посетителя не задан (пустой);  "N" - UserAgent посетителя задан (значение по умолчанию)
	[URL_TO] => страница (или ее часть) на которую приходит посетитель
	[URL_FROM] => ссылающаяся страница (или ее часть), с которой приходит посетитель
	[MESSAGE] => текст сообщения которое будет выдано посетителю сайта, в случае его попадания под данную запись стоп-листа
	[MESSAGE_LID] => язык сообщения задаваемого в поле [MESSAGE]
	[URL_REDIRECT] => страница на которую необходимо перенаправить посетителя после его попадания под данную запись стоп-листа
	[COMMENTS] => административный комментарий; используется, как правило, для указания причин создания данной записи
	[TEST] => "Y" - данная запись является тестовой; "N" - данная запись не тестовая (см. метод CStopList::Check)
	[SITE_ID] => ID сайта для которого запись будет действительна; если значение не задано, то это означает что запись действительная для всех сайтов
	[LAMP] => "green" - запись активна и работает; "red" - запись не активная по каким либо причинам (возможно истек срок действия, либо снят флаг активности)
)Копировать
```

### Примеры использования

```
<?
// выберем записи стоп-листа с IP адресами 192.168.0.xxx
$arFilter = array(
	"IP_1" => 192,
	"IP_2" => 168,
	"IP_3" => 0
);
// получим список записей
$rs = CStopList::GetList(
	($by = "s_id"), 
	($order = "desc"), 
	$arFilter, 
	$is_filtered
);
// выведем все записи
while ($ar = $rs->Fetch())
{
	echo "<pre>"; print_r($ar); echo "</pre>";    
}
?>Копировать
```

Новинки документации в соцсетях: