[Веб-аналитика](/api_help/statistic/index.php)

[Классы](/api_help/statistic/classes/index.php)

[CReferer](/api_help/statistic/classes/creferer/index.php)

GetList

GetList
=======

Включить вкладки

Описание и параметры

Смотрите также

Структура возвращаемой записи

Примеры использования

### Описание и параметры

```
CDBResult
CReferer::GetList(
	string &by = "s_id",
	string &order = "desc",
	array filter = array(),
	bool &is_filtered,
	int &total,
	string &group_by,
	int &max
)Копировать
```

Возвращает список [ссылающихся сайтов (страниц)](/api_help/statistic/terms.php#referer).

#### Параметры метода

| Параметр | Описание |
| --- | --- |
| *by* | Поле для сортировки. В зависимости от группировки списка, набор доступных значений данной переменной может быть различным.  * при группировке по ссылающейся странице (*filter*["**GROUP**"]="U"):   + **s\_url\_from** - ссылающаяся страница;   + **s\_quantity** - количество заходов с ссылающейся страницы;   + **s\_average\_hits** - среднее количество [хитов](/api_help/statistic/terms.php#hit), производимое посетителями заходящими с той или ссылающейся страницы. * при группировке по ссылающемуся домену (*filter*["**GROUP**"]="S"):   + **s\_url\_from** - ссылающийся домен;   + **s\_quantity** - количество заходов с ссылающегося домена;   + **s\_average\_hits** - среднее количество хитов, производимое посетителями. * когда группировка не установлена:   + **s\_id** - ID записи;   + **s\_site\_id** - ID сайта, на который пришли;   + **s\_url\_from** - ссылающаяся страница (с которой пришли);   + **s\_url\_to** - страница на которую пришли;   + **s\_date\_hit** - дата;   + **s\_session\_id** - ID сессии. |
| *оrder* | Порядок сортировки. Возможные значения:  * **asc** - по возрастанию; * **desc** - по убыванию. |
| *filter* | Массив для фильтрации результирующего списка. В массиве допустимы следующие ключи:  * **ID** - ID записи; * **ID\_EXACT\_MATCH** - если значение равно "N", то при фильтрации по **ID** будет искаться вхождение; * **SESSION\_ID** - ID сессии; * **SESSION\_ID\_EXACT\_MATCH** - если значение равно "N", то при фильтрации по **SESSION\_ID** будет искаться вхождение; * **DATE1** - начальное значение интервала для поля "дата"; * **DATE2** - конечное значение интервала для поля "дата"; * **FROM\_PROTOCOL** - протокол ссылающейся страницы; * **FROM\_PROTOCOL\_EXACT\_MATCH** - если значение равно "Y", то при фильтрации по **FROM\_PROTOCOL** будет искаться точное совпадение; * **FROM\_DOMAIN** - домен ссылающейся страницы; * **FROM\_DOMAIN\_EXACT\_MATCH** - если значение равно "Y", то при фильтрации по **FROM\_DOMAIN** будет искаться точное совпадение; * **FROM\_PAGE** - ссылающаяся страница; * **FROM\_PAGE\_EXACT\_MATCH** - если значение равно "Y", то при фильтрации по **FROM\_PAGE** будет искаться точное совпадение; * **FROM** - протокол + домен + ссылающаяся страница; * **FROM\_EXACT\_MATCH** - если значение равно "Y", то при фильтрации по **FROM** будет искаться точное совпадение; * **TO**\* - страница на которую пришли; * **TO\_EXACT\_MATCH** - если значение равно "Y", то при фильтрации по **TO** будет искаться точное совпадение; * **TO\_404** - была ли [404 ошибка](/api_help/statistic/terms.php#404) на странице, на которую пришли, возможные значения:   + **Y** - была;   + **N** - не была. * **SITE\_ID** - ID сайта на который пришли; * **GROUP** - группировка результирующего списка; возможные значения:   + **S** - группировка по ссылающемуся домену (сайту);   + **U** - группировка по ссылающейся странице.  \* - допускается [сложная логика](/api_help/main/general/filter.php) |
| *is\_filtered* | Флаг отфильтрованности результирующего списка. Если значение равно "true", то список был отфильтрован. |
| *total* | Суммарные количество заходов с ссылающихся страниц. |
| *group\_by* | Группировка результирующего списка. Возможные значения:  * **U** - группировка по ссылающейся странице; * **S** - группировка по ссылающемуся домену. |
| *max* | Количество заходов с самой популярной ссылающейся страницы. |

### Смотрите также

* [Термин "Ссылающийся сайт (страница)"](/api_help/statistic/terms.php#referer)

### Структура возвращаемой записи

В зависимости от установленной группировки, структура возвращаемой записи различная.

* при группировке по ссылающейся странице (*filter*["**GROUP**"]="U"):

  ```
  Array
  (
  	[URL_FROM] => ссылающаяся страница
  	[QUANTITY] => сколько раз зашли с данной ссылающейся страницы
  	[PERCENT] => процент заходов с данной ссылающейся страницы, относительно всех заходов со всех ссылающихся сайтов
  	[AVERAGE_HITS] => среднее количество хитов, производимое посетителями, заходящими с данной ссылающейся страницы
  )Копировать
  ```
* при группировке по ссылающемуся домену (*filter*["**GROUP**"]="S"):

  ```
  Array
  (
  	[URL_FROM] => ссылающийся домен
  	[QUANTITY] => сколько раз зашли с данного ссылающегося домена
  	[PERCENT] => процент заходов с данного ссылающегося домена, относительно всех заходов со всех ссылающихся сайтов
  	[AVERAGE_HITS] => среднее количество хитов, производимое посетителями, заходящими с данного ссылающегося домена
  )Копировать
  ```
* когда группировка не установлена:

  ```
  Array
  (
  	[ID] => ID записи
  	[URL_FROM] => ссылающаяся страница
  	[DATE_HIT] => дата
  	[SESSION_ID] => ID сессии
  	[URL_TO] => страница, на которую пришли
  	[URL_TO_404] => [Y|N] флаг 404 ошибки на странице на которую пришли
  	[SITE_ID] => ID сайта на который пришли
  )Копировать
  ```

### Примеры использования

```
<?
// отфильтруем только заходы с доменов "google"
// сгруппировав по ссылающемуся домену
$arFilter = array(
	"FROM_DOMAIN"  => "google",
	"GROUP"        => "S"
);
// получим список записей
$rs = CReferer::GetList(
	($by = "s_url_from"), 
	($order = "desc"), 
	$arFilter, 
	$is_filtered,
	$total,
	$group_by,
	$max
);
// выведем все записи
while ($ar = $rs->Fetch())
{
	echo "<pre>"; print_r($ar); echo "</pre>";    
}
?>Копировать
```

Новинки документации в соцсетях: