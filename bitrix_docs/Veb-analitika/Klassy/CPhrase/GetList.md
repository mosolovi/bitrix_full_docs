[Веб-аналитика](/api_help/statistic/index.php)

[Классы](/api_help/statistic/classes/index.php)

[CPhrase](/api_help/statistic/classes/cphrase/index.php)

GetList

GetList
=======

Включить вкладки

Описание и параметры

Смотрите также

Структура возвращаемой записи

Примеры использования

### Описание и параметры

```
CDBResult
CPhrase::GetList(
	string &by = "s_id",
	string &order = "desc",
	array filter = array(),
	bool &is_filtered,
	int &total,
	string &group_by,
	int &max
)Копировать
```

Возвращает список [поисковых фраз](/api_help/statistic/terms.php#phrase) с возможностью группировки по поисковое фразе или [поисковой системе](/api_help/statistic/terms.php#search).

#### Параметры метода

| Параметр | Описание |
| --- | --- |
| *by* | Поле для сортировки. В зависимости от группировки списка, набор доступных значений данной переменной может быть различным.  * при группировке по поисковой фразе (*filter*["**GROUP**"]="P"):   + **s\_phrase** - поисковая фраза;   + **s\_quantity** - количество заходов с той или иной поисковой фразой. * при группировке по поисковой системе (*filter*["**GROUP**"]="S"):   + **s\_name** - поисковая система;   + **s\_quantity** - количество заходов с данной поисковой системы;   + **s\_average\_hits** - среднее количество [хитов](/api_help/statistic/terms.php#hit) производимое посетителями заходящим с той или иной поисковой системы. * когда группировка не установлена:   + **s\_id** - ID записи;   + **s\_counter** - счетчик;   + **s\_site\_id** - ID сайта на который пришли;   + **s\_phrase** - поисковая фраза;   + **s\_searcher\_id** - ID поисковой системы;   + **s\_referer\_id** - ID записи из таблицы [ссылающихся сайтов (страниц)](/api_help/statistic/terms.php#referer);   + **s\_date\_hit** - дата захода;   + **s\_url\_to** - страница на которую пришли;   + **s\_session\_id** - ID [сессии](/api_help/statistic/terms.php#session). |
| *оrder* | Порядок сортировки. Возможные значения:  * **asc** - по возрастанию; * **desc** - по убыванию. |
| *filter* | Массив для фильтрации результирующего списка. В массиве допустимы следующие ключи:  * **ID** - ID записи; * **ID\_EXACT\_MATCH** - если значение равно "N", то при фильтрации по **ID** будет искаться вхождение; * **SESSION\_ID** - ID сессии; * **SESSION\_ID\_EXACT\_MATCH** - если значение равно "N", то при фильтрации по **SESSION\_ID** будет искаться вхождение; * **SEARCHER\_ID** - ID поисковой системы; * **SEARCHER\_ID\_EXACT\_MATCH** - если значение равно "N", то при фильтрации по **SEARCHER\_ID** будет искаться вхождение; * **REFERER\_ID** - ID записи из таблицы ссылающихся сайтов (страниц); * **REFERER\_ID\_EXACT\_MATCH** - если значение равно "N", то при фильтрации по **REFERER\_ID** будет искаться вхождение; * **SEARCHER**\* - название поисковой системы; * **SEARCHER\_EXACT\_MATCH** - если значение равно "Y", то при фильтрации по **SEARCHER** будет искаться точное совпадение; * **DATE1** - начальное значение интервала для поля "дата"; * **DATE2** - конечно значение интервала для поля "дата"; * **PHRASE**\* - поисковая фраза; * **PHRASE\_EXACT\_MATCH** - если значение равно "Y", то при фильтрации по **PHRASE** будет искаться точное совпадение; * **TO**\* - страница на которую пришли; * **TO\_EXACT\_MATCH** - если значение равно "Y", то при фильтрации по **TO** будет искаться точное совпадение; * **TO\_404** - была ли [404 ошибка](/api_help/statistic/terms.php#404) на странице на которую пришли, возможные значения:   + **Y** - была;   + **N** - не была. * **SITE\_ID** - ID сайта, на который пришли; * **GROUP** - группировка результирующего списка, возможные значения:   + **P** - группировка по поисковой фразе;   + **S** - группировка по поисковой системе.  \* - допускается [сложная логика](/api_help/main/general/filter.php) |
| *is\_filtered* | Флаг отфильтрованности результирующего списка. Если значение равно "true", то список был отфильтрован. |
| *total* | Суммарное количество поисковых фраз. Принимает значение только при установленной группировке. |
| *group\_by* | Группировка списка поисковых фраз. Возможные значения:  * **P** - группировка по поисковой фразе; * **S** - группировка по поисковой системе. |
| *max* | Количество заходов по самой популярной поисковой фразе. Принимает значение только при установленной группировке. |

### Смотрите также

* [Термин "Поисковая фраза"](/api_help/statistic/terms.php#phrase)
* [Термин "Поисковая система"](/api_help/statistic/terms.php#search)

### Структура возвращаемой записи

В зависимости от установленной группировки, структура возвращаемой записи различная.

* при группировке по поисковой фразе (*filter*["**GROUP**"]="P"):

  ```
  Array
  (
  	[PHRASE] => поисковая фраза
  	[QUANTITY] => сколько раз заходили на сайт по данной поисковой фразе
  	[PERCENT] => процент от общего количества заходов по разным поисковым фразам
  )Копировать
  ```
* при группировке по поисковой системе (*filter*["**GROUP**"]="S"):

  ```
  Array
  (
  	[SEARCHER_ID] => ID поисковой системы
  	[SEARCHER_NAME] => название поисковой системы
  	[QUANTITY] => количество заходов с поисковой системы
  	[PERCENT] => процент заходов с данной поисковой системы
  	[AVERAGE_HITS] => среднее количество хитов, производимое посетителями, заходящими с той или иной поисковой системы
  )Копировать
  ```
* когда группировка не установлена:

  ```
  Array
  (
  	[ID] => ID записи
  	[PHRASE] => поисковая фраза
  	[DATE_HIT] => время
  	[SESSION_ID] => ID сессии
  	[REFERER_ID] => ID записи из таблицы ссылающихся сайтов (страниц)
  	[SEARCHER_ID] => ID поисковой системы
  	[SEARCHER_NAME] => название поисковой системы
  	[URL_TO] => страница на которую пришли
  	[URL_TO_404] => [Y|N] флаг 404 ошибки на странице, на которую пришли
  	[SITE_ID] => ID сайта, на который пришли
  )Копировать
  ```

### Примеры использования

```
<?
// отфильтруем только те поисковые фразы
// которые искали на сайте с помощью внутреннего поиска
$arFilter = array(
	"SEARCHER_ID"  => 1
);
// получим список записей
$rs = CPhrase::GetList(
	($by = "s_id"), 
	($order = "desc"), 
	$arFilter, 
	$is_filtered,
	$total,
	$group_by,
	$max
);
// выведем все записи
while ($ar = $rs->Fetch())
{
	echo ""; print_r($ar); echo "";    
}
?>Копировать
```

Новинки документации в соцсетях: