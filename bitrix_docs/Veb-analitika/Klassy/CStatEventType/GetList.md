[Веб-аналитика](/api_help/statistic/index.php)

[Классы](/api_help/statistic/classes/index.php)

[CStatEventType](/api_help/statistic/classes/cstateventtype/index.php)

GetList

GetList
=======

Включить вкладки

Описание и параметры

Смотрите также

Структура возвращаемой записи

Примеры использования

### Описание и параметры

```
CDBResult
CStatEventType::GetList(
	string &by = "s_today_counter",
	string &order = "desc",
	array filter = array(),
	bool &is_filtered,
	mixed limit = false
)Копировать
```

Возвращает список [типов событий](/api_help/statistic/terms.php#event_type).

#### Параметры метода

| Параметр | Описание |
| --- | --- |
| *by* | Поле для сортировки. Возможные значения:  * **s\_id** - ID типа события; * **s\_date\_last** - дата последнего [события](/api_help/statistic/terms.php#event) данного типа; * **s\_date\_enter** - дата первого события данного типа; * **s\_today\_counter** - количество событий данного типа за сегодня; * **s\_yesterday\_counter** - количество событий данного типа за вчера; * **s\_b\_yesterday\_counter** - количество событий данного типа за позавчера; * **s\_total\_counter** - суммарное количество событий данного типа; * **s\_period\_counter** - количество событий данного типа за указанный период (*filter*[**DATE1\_PERIOD**], *filter*[**DATE2\_PERIOD**]); * **s\_name** - название типа события; * **s\_event1** - [идентификатор event1](/api_help/statistic/terms.php#event_type_id) типа события; * **s\_event2** - идентификатор event2 типа события; * **s\_event12** - сортировка по "EVENT1, EVENT2"; * **s\_chart** - сортировка по "DIAGRAM\_DEFAULT desc, TOTAL\_COUNTER"; * **s\_stat** - сортировка по "TODAY\_COUNTER desc, YESTERDAY\_COUNTER desc, B\_YESTERDAY\_COUNTER desc, TOTAL\_COUNTER desc, PERIOD\_COUNTER". |
| *оrder* | Порядок сортировки. Возможные значения:  * **asc** - по возрастанию; * **desc** - по убыванию. |
| *filter* | Массив для фильтрации результирующего списка. В массиве допустимы следующие ключи:  * **ID**\* - ID типа события; * **ID\_EXACT\_MATCH** - если значение равно "N", то при фильтрации по **ID** будет искаться вхождение; * **EVENT1**\* - идентификатор event1 типа события; * **EVENT1\_EXACT\_MATCH** - если значение равно "Y", то при фильтрации по **EVENT1** будет искаться точное совпадение; * **EVENT2**\* - идентификатор event2 типа события; * **EVENT2\_EXACT\_MATCH** - если значение равно "Y", то при фильтрации по **EVENT2** будет искаться точное совпадение; * **NAME**\* - название типа события; * **NAME\_EXACT\_MATCH** - если значение равно "Y", то при фильтрации по **NAME** будет искаться точное совпадение; * **DESCRIPTION**\* - описание типа события; * **DESCRIPTION\_EXACT\_MATCH** - если значение равно "Y", то при фильтрации по **DESCRIPTION** будет искаться точное совпадение; * **DATE\_ENTER\_1** - начальное значение интервала для поля "дата первого события данного типа"; * **DATE\_ENTER\_2** - конечное значение интервала для поля "дата первого события данного типа"; * **DATE\_LAST\_1** - начальное значение интервала для поля "дата последнего события данного типа"; * **DATE\_LAST\_2** - конечное значение интервала для поля "дата последнего события данного типа"; * **DATE1\_PERIOD** - начальное значение значение для произвольного периода; * **DATE2\_PERIOD** - конечное значение значение для произвольного периода; * **COUNTER1** - начальное значение интервала для поля "суммарное количество событий данного типа"; * **COUNTER2** - конечное значение интервала для поля "суммарное количество событий данного типа"; * **ADV\_VISIBLE** - флаг включать ли статистику по данному типу события в отчет по рекламным кампаниям, возможные значения:   + **Y** - включать;   + **N** - не включать. * **DIAGRAM\_DEFAULT** - флаг включать ли данный тип события в круговую диаграмму и график по умолчанию, возможные значения:   + **Y** - включать;   + **N** - не включать. * **KEEP\_DAYS1** - начальное значение интервала для поля "количество дней отведенное для хранения событий данного типа"; * **KEEP\_DAYS2** - конечное значение интервала для поля "количество дней отведенное для хранения событий данного типа"; * **DYNAMIC\_KEEP\_DAYS1** - начальное значение интервала для поля "количество дней отведенное для хранения статистики по данному типу события в разрезе по дням"; * **DYNAMIC\_KEEP\_DAYS2** - конечное значение интервала для поля "количество дней отведенное для хранения статистики по данному типу события в разрезе по дням"; * **MONEY1** - начальное значение интервала для поля "суммарная денежная сумма для данного типа событий"; * **MONEY2** - конечное значение интервала для поля "суммарная денежная сумма для данного типа событий"; * **CURRENCY** - трехсимвольный идентификатор валюты для денежной суммы; * **GROUP** - группировка результирующего списка, возможные значения:   + **event1** - группировка по *event1*;   + **event2** - группировка по *event2*.  \* - допускается [сложная логика](/api_help/main/general/filter.php) |
| *is\_filtered* | Флаг отфильтрованности результирующего списка. Если значение равно "true", то список был отфильтрован. |
| *limit* | Максимальное число типов событий которые будут выбраны в списке. Если значение равно "false", то кол-во РК будет ограничено в соответствии со значением параметра **Максимальное кол-во показываемых записей в таблицах** из настроек модуля "Статистика". |

### Смотрите также

* [CStatEventType::GetDynamicList](/api_help/statistic/classes/cstateventtype/getdynamiclist.php)
* [CStatEventType::GetSimpleList](/api_help/statistic/classes/cstateventtype/getsimplelist.php)
* [Термин "Тип события"](/api_help/statistic/terms.php#event_type)

### Структура возвращаемой записи

В зависимости от установленной группировки, структура возвращаемой записи различная.

* при группировке по event1 (*filter*["**GROUP**"]="event1"):

  ```
  Array
  (
  	[EVENT1] => идентификатор event1 типа события
  	[DATE_ENTER] => дата первого события, тип которого имеет данный идентификатор event1
  	[DATE_LAST] => дата последнего события, тип которого имеет данный идентификатор event1
  	[TOTAL_COUNTER] => суммарное количество событий
  	[TODAY_COUNTER] => количество событий за сегодня
  	[YESTERDAY_COUNTER] => количество событий за вчера
  	[B_YESTERDAY_COUNTER] => количество событий за позавчера
  	[PERIOD_COUNTER] => количество событий за период времени, указанный в фильтре (filter[DATE1_PERIOD], filter[DATE2_PERIOD])
  	[TOTAL_MONEY] => суммарная денежная сумма
  	[TODAY_MONEY] => денежная сумма за сегодня
  	[YESTERDAY_MONEY] => денежная сумма за вчера
  	[B_YESTERDAY_MONEY] => денежная сумма за позавчера
  	[PERIOD_MONEY] => денежная сумма за период времени, указанный в фильтре (filter[DATE1_PERIOD], filter[DATE2_PERIOD])
  	[CURRENCY] => трехсимвольный идентификатор валюты
  )Копировать
  ```
* при группировке по event2 (*filter*["**GROUP**"]="event2"):

  ```
  Array
  (
  	[EVENT2] => идентификатор event2 типа события
  	[DATE_ENTER] => дата первого события, тип которого имеет данный идентификатор event2
  	[DATE_LAST] => дата последнего события, тип которого имеет данный идентификатор event2
  	[TOTAL_COUNTER] => суммарное количество событий
  	[TODAY_COUNTER] => количество событий за сегодня
  	[YESTERDAY_COUNTER] => количество событий за вчера
  	[B_YESTERDAY_COUNTER] => количество событий за позавчера
  	[PERIOD_COUNTER] => количество событий за период времени, указанный в фильтре (filter[DATE1_PERIOD], filter[DATE2_PERIOD])
  	[TOTAL_MONEY] => суммарная денежная сумма
  	[TODAY_MONEY] => денежная сумма за сегодня
  	[YESTERDAY_MONEY] => денежная сумма за вчера
  	[B_YESTERDAY_MONEY] => денежная сумма за позавчера
  	[PERIOD_MONEY] => денежная сумма за период времени, указанный в фильтре (filter[DATE1_PERIOD], filter[DATE2_PERIOD])
  	[CURRENCY] => трехсимвольный идентификатор валюты
  )Копировать
  ```
* когда группировка не установлена:

  ```
  Array
  (
  	[ID] => ID типа события
  	[EVENT1] => идентификатор event1 типа события
  	[EVENT2] => идентификатор event2 типа события
  	[DIAGRAM_DEFAULT] => [Y|N] флаг: включать ли данный тип события в круговую диаграмму и график по умолчанию
  	[NAME] => название типа события
  	[EVENT] => event1 / event2, либо название типа события (если оно указано)
  	[DESCRIPTION] => описание типа события
  	[TOTAL_COUNTER] => суммарное количество событий данного типа
  	[TODAY_COUNTER] => количество событий данного типа за сегодня
  	[YESTERDAY_COUNTER] => количество событий данного типа за вчера
  	[B_YESTERDAY_COUNTER] => количество событий данного типа за позавчера
  	[PERIOD_COUNTER] => количество событий данного типа за период времени, указанный в фильтре (filter[DATE1_PERIOD], filter[DATE2_PERIOD])
  	[TOTAL_MONEY] => суммарная денежная сумма по данному типу события
  	[TODAY_MONEY] => денежная сумма по данному типу события за сегодня
  	[YESTERDAY_MONEY] => денежная сумма по данному типу события за вчера
  	[B_YESTERDAY_MONEY] => денежная сумма по данному типу события за позавчера
  	[PERIOD_MONEY] => денежная сумма по данному типу события за период времени, указанный в фильтре (filter[DATE1_PERIOD], filter[DATE2_PERIOD])
  	[CURRENCY] => трехсимвольный идентификатор валюты
  )Копировать
  ```

### Примеры использования

```
<?
// получим данные только по тем типам событий 
// у которых event1 = "download"
// а также получим дополнительные данные на декабрь 2007 года
$arFilter = array(
	"DATE1_PERIOD" => "01.12.2007",
	"DATE2_PERIOD" => "31.12.2007",
	"EVENT1"       => "download"
);
// получим список записей
$rs = CStatEventType::GetList(
	($by = "s_today_counter"), 
	($order = "desc"), 
	$arFilter, 
	$is_filtered
);
// выведем все записи
while ($ar = $rs->Fetch())
{
	echo "<pre>"; print_r($ar); echo "</pre>";    
}
?>
Копировать
```

Новинки документации в соцсетях: