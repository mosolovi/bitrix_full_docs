[Веб-аналитика](/api_help/statistic/index.php)

[Классы](/api_help/statistic/classes/index.php)

[CSession](/api_help/statistic/classes/csession/index.php)

GetList

GetList
=======

Включить вкладки

Описание и параметры

Смотрите также

Структура возвращаемой записи

Примеры использования

### Описание и параметры

```
CDBResult
CSession::GetList(
	string &by = "s_id",
	string &order = "desc",
	array filter = array(),
	bool &is_filtered
)Копировать
```

Возвращает список [сессий](/api_help/statistic/terms.php#session).

#### Параметры метода

| Параметр | Описание |
| --- | --- |
| *by* | Поле для сортировки. Возможные значения:  * **s\_id** - ID сессии; * **s\_last\_site\_id** - ID сайта последнего [хита](/api_help/statistic/terms.php#hit) сессии; * **s\_first\_site\_id** - ID сайта первого хита сессии; * **s\_date\_first** - время первого хита сессии; * **s\_date\_last** - время последнего хита сессии; * **s\_user\_id** - ID [пользователя](/api_help/statistic/terms.php#user) под которым последний раз был авторизован [посетитель](/api_help/statistic/terms.php#guest); * **s\_guest\_id** - ID посетителя; * **s\_ip** - [IP адрес](/api_help/statistic/terms.php#ip) посетителя на последнем хите сессии; * **s\_hits** - количество хитов в данной сессии; * **s\_events** - количество [событий](/api_help/statistic/terms.php#event) в данной сессии; * **s\_adv\_id** - ID рекламной кампании по которой пришел посетитель; * **s\_country\_id** - ID страны посетителя; * **s\_url\_last** - страница первого хита сессии; * **s\_url\_to** - страница последнего хита сессии. |
| *оrder* | Порядок сортировки. Возможные значения:  * **asc** - по возрастанию; * **desc** - по убыванию. |
| *filter* | Массив для фильтрации результирующего списка. В массиве допустимы следующие ключи:  * **ID**\* - ID сессии; * **ID\_EXACT\_MATCH** - если значение равно "N", то при фильтрации по **ID** будет искаться вхождение; * **GUEST\_ID**\* - ID посетителя; * **GUEST\_ID\_EXACT\_MATCH** - если значение равно "N", то при фильтрации по **GUEST\_ID** будет искаться вхождение; * **NEW\_GUEST** - флаг "новый посетитель", возможные значения:   + **Y** - посетитель впервые на портале;   + **N** - посетитель уже посещал ранее портал. * **USER\_ID**\* - ID [пользователя](/api_help/statistic/terms.php#user) под которым последний раз был авторизован посетитель; * **USER\_ID\_EXACT\_MATCH** - если значение равно "N", то при фильтрации по **USER\_ID** будет искаться вхождение; * **USER\_AUTH** - флаг "был ли посетитель авторизован в данной сессии", возможные значения:   + **Y** - да;   + **N** - нет. * **USER**\* - ID, логин, имя, фамилия пользователя под которым последний раз был авторизован посетитель; * **USER\_EXACT\_MATCH** - если значение равно "Y", то при фильтрации по **USER** будет искаться точное совпадение; * **REGISTERED** - флаг "был ли авторизован посетитель в данной сессии или до этого", возможные значения:   + **Y** - был;   + **N** - не был. * **FAVORITES** - флаг "добавлял ли посетитель сайт в "Избранное"", возможные значения:   + **Y** - да;   + **N** - нет. * **EVENTS1** - начальное значение интервала для поля "количество событий данной сессии"; * **EVENTS2** - конечное значение интервала для поля "количество событий данной сессии"; * **HITS1** - начальное значение интервала для поля "количество хитов данной сессии"; * **HITS2** - конечное значение интервала для поля "количество хитов данной сессии"; * **ADV** - флаг "приходил ли посетитель в данной сессии по какой-либо рекламной кампании", возможные значения:   + **Y** - да;   + **N** - нет. * **ADV\_ID**\* - ID рекламной кампании; * **ADV\_ID\_EXACT\_MATCH** - если значение равно "N", то при фильтрации по **ADV\_ID** будет искаться вхождение; * **ADV\_BACK** - флаг "возврат по рекламной кампании", возможные значения:   + **Y** - был [возврат](/api_help/statistic/terms.php#adv_back);   + **N** - был [прямой заход](/api_help/statistic/terms.php#adv_first). * **REFERER1**\* - [идентификатор](/api_help/statistic/terms.php#adv_id) referer1 рекламной кампании; * **REFERER1\_EXACT\_MATCH** - если значение равно "Y", то при фильтрации по **REFERER1** будет искаться точное совпадение; * **REFERER2**\* - идентификатор referer2 рекламной кампании; * **REFERER2\_EXACT\_MATCH** - если значение равно "Y", то при фильтрации по **REFERER2** будет искаться точное совпадение; * **REFERER3**\* - [дополнительный параметр](/api_help/statistic/terms.php#adv_referer3) referer3 рекламной кампании; * **REFERER3\_EXACT\_MATCH** - если значение равно "Y", то при фильтрации по **REFERER3** будет искаться точное совпадение; * **STOP** - флаг "попал ли посетитель под какую либо запись [стоп-листа](/api_help/statistic/terms.php#stop_list)", возможные значения:   + **Y** - да;   + **N** - нет. * **STOP\_LIST\_ID**\* - ID записи стоп-листа под которую попал посетитель, если это имело место быть; * **STOP\_LIST\_ID\_EXACT\_MATCH** - если значение равно "N", то при фильтрации по **STOP\_LIST\_ID** будет искаться вхождение; * **COUNTRY\_ID**\* - ID страны посетителя; * **COUNTRY\_ID\_EXACT\_MATCH** - если значение равно "N", то при фильтрации по **COUNTRY\_ID** будет искаться вхождение; * **COUNTRY**\* - наименование страны посетителя; * **COUNTRY\_EXACT\_MATCH** - если значение равно "Y", то при фильтрации по **COUNTRY** будет искаться точное совпадение; * **IP**\* - [IP адрес](/api_help/statistic/terms.php#ip) посетителя на последнем хите сессии; * **IP\_EXACT\_MATCH** - если значение равно "Y", то при фильтрации по **IP** будет искаться точное совпадение; * **USER\_AGENT**\* - [UserAgent](/api_help/statistic/terms.php#user_agent) посетителя; * **USER\_AGENT\_EXACT\_MATCH** - если значение равно "Y", то при фильтрации по **USER\_AGENT** будет искаться точное совпадение; * **DATE\_START\_1** - начальное значение интервала для поля "время первого хита сессии"; * **DATE\_START\_2** - конечное значение интервала для поля "время первого хита сессии"; * **DATE\_END\_1** - начальное значение интервала для поля "время последнего хита сессии"; * **DATE\_END\_2** - конечное значение интервала для поля "время последнего хита сессии"; * **URL\_TO**\* - первая страница сессии; * **URL\_TO\_EXACT\_MATCH** - если значение равно "Y", то при фильтрации по **URL\_TO** будет искаться точное совпадение; * **URL\_TO\_404** - была ли [404 ошибка](/api_help/statistic/terms.php#404) на первой страницы сессии   + **Y** - была;   + **N** - не было. * **FIRST\_SITE\_ID**\* - ID сайта на первом хите сессии; * **FIRST\_SITE\_ID\_EXACT\_MATCH** - если значение равно "N", то при фильтрации по **FIRST\_SITE\_ID** будет искаться вхождение; * **URL\_LAST**\* - последняя страница сессии; * **URL\_LAST\_EXACT\_MATCH** - если значение равно "Y", то при фильтрации по **URL\_LAST** будет искаться точное совпадение; * **URL\_LAST\_404** - была ли [404 ошибка](/api_help/statistic/terms.php#404) на последней страницы сессии   + **Y** - была;   + **N** - не было. * **LAST\_SITE\_ID**\* - ID сайта на последнем хите сессии; * **LAST\_SITE\_ID\_EXACT\_MATCH** - если значение равно "N", то при фильтрации по **LAST\_SITE\_ID** будет искаться вхождение.  \* - допускается [сложная логика](/api_help/main/general/filter.php) |
| *is\_filtered* | Флаг отфильтрованности результирующего списка. Если значение равно "true", то список был отфильтрован. |

### Смотрите также

* [Термин "Сессия"](/api_help/statistic/terms.php#session)

### Структура возвращаемой записи

```
Array
(
	[ID] => ID сессии
	[GUEST_ID] => ID посетителя
	[NEW_GUEST] => флаг "новый посетитель" (Y - новый; N - вернувшийся)
	[USER_ID] => ID пользователя под которым последний раз был авторизован посетитель
	[USER_AUTH] => флаг "авторизован ли посетитель в данной сессии" (Y - да; N - нет)
	[C_EVENTS] => количество событий произведенных в данной сессии
	[HITS] => количество хитов произведенных в данной сессии
	[FAVORITES] => флаг "добавлял ли посетитель сайт в "Избранное" в данной сессии
	[STOP_LIST_ID] => ID записи стоп-листа, под которую попал посетитель (если это имело место быть)
	[COUNTRY_ID] => ID страны посетителя
	[USER_AGENT] => UserAgent посетителя
	[URL_FROM] => ссылающаяся страница для первого хита сессии
	[DATE_STAT] => дата первого хита сессии
	[DATE_FIRST] => время первого хита сессии
	[URL_TO] => страница первого хита сессии
	[URL_TO_404] => флаг 404 ошибки на первой странице сессии (Y - да; N - нет)
	[FIRST_HIT_ID] => ID первого хита
	[FIRST_SITE_ID] => ID сайта для первого хита сессии
	[IP_FIRST] => IP адрес посетителя на первом хите сессии (в виде: XXX.XXX.XXX.XXX)
	[IP_FIRST_NUMBER] => IP адрес посетителя на первом хите сессии (в числовом представлении)
	[DATE_LAST] => время последнего хита сессии
	[URL_LAST] => страница последнего хита сессии
	[URL_LAST_404] => флаг 404 ошибки на последней странице сессии (Y - да; N - нет)
	[LAST_HIT_ID] => ID последнего хита
	[LAST_SITE_ID] => ID сайта для последнего хита сессии
	[IP_LAST] => IP адрес посетителя на последнем хите сессии (в виде: XXX.XXX.XXX.XXX)
	[IP_LAST_NUMBER] => IP адрес посетителя на последнем хите сессии (в числовом представлении)
    
	[ADV_ID] => ID рекламной кампании
	[ADV_BACK] => флаг прямого захода (N) или возврата (Y) по рекламной кампании
	[REFERER1] => идентификатор referer1 рекламной кампании
	[REFERER2] => идентификатор referer2 рекламной кампании
	[REFERER3] => дополнительный параметр referer3 рекламной кампании
	[SESSION_TIME] => разница во времени между первым и последним хитом сессии (сек.)
	[PHPSESSID] => идентификатор сессии выданный PHP
)Копировать
```

### Примеры использования

```
<?
// выберем все неудаленные сессии посетителя #1025
$arFilter = array(
	"GUEST_ID" => "1025"
);
// получим список записей
$rs = CSession::GetList(
	($by = "s_id"), 
	($order = "desc"), 
	$arFilter, 
	$is_filtered
);
// выведем все записи
while ($ar = $rs->Fetch())
{
	echo "<pre>"; print_r($ar); echo "</pre>";    
}
?>Копировать
```

Новинки документации в соцсетях: