[Веб-аналитика](/api_help/statistic/index.php)

[Классы](/api_help/statistic/classes/index.php)

[CHit](/api_help/statistic/classes/chit/index.php)

GetList

GetList
=======

Включить вкладки

Описание и параметры

Смотрите также

Структура возвращаемой записи

Примеры использования

### Описание и параметры

```
CDBResult
CHit::GetList(
	string &by = "s_id",
	string &order = "desc",
	array filter = array(),
	bool &is_filtered
)Копировать
```

Возвращает список [хитов](/api_help/statistic/terms.php#hit) [посетителей](/api_help/statistic/terms.php#guest). Число выводимых строк определяется в поле **Максимальное кол-во показываемых записей в таблицах** в [настройках модуля](http://dev.1c-bitrix.ru/user_help/statistic/settings.php) Веб-аналитика.

#### Параметры метода

| Параметр | Описание |
| --- | --- |
| *by* | Поле для сортировки. Возможные значения:  * **s\_id** - ID хита; * **s\_site\_id** - ID сайта; * **s\_session\_id** - ID [сессии](/api_help/statistic/terms.php#session); * **s\_date\_hit** - время хита; * **s\_user\_id** - ID [пользователя](/api_help/statistic/terms.php#user) под которым был авторизован посетитель (в момент хита или до того); * **s\_guest\_id** - ID [посетителя](/api_help/statistic/terms.php#guest); * **s\_ip** - [IP адрес](/api_help/statistic/terms.php#ip) посетителя; * **s\_url** - страница хита; * **s\_country\_id** - ID страны посетителя. |
| *оrder* | Порядок сортировки. Возможные значения:  * **asc** - по возрастанию; * **desc** - по убыванию. |
| *filter* | Массив для фильтрации результирующего списка. В массиве допустимы следующие ключи:  * **ID**\* - ID хита; * **ID\_EXACT\_MATCH** - если значение равно "N", то при фильтрации по **ID** будет искаться вхождение; * **GUEST\_ID**\* - ID посетителя; * **GUEST\_ID\_EXACT\_MATCH** - если значение равно "N", то при фильтрации по **GUEST\_ID** будет искаться вхождение; * **NEW\_GUEST** - флаг "новый посетитель", возможные значения:   + **Y** - посетитель впервые на портале;   + **N** - посетитель уже посещал ранее портал. * **SESSION\_ID**\* - ID сессии; * **SESSION\_ID\_EXACT\_MATCH** - если значение равно "N", то при фильтрации по **SESSION\_ID** будет искаться вхождение; * **STOP\_LIST\_ID**\* - ID записи [стоп-листа](/api_help/statistic/terms.php#stop_list) под которую попал посетитель (если это имело место быть); * **STOP\_LIST\_ID\_EXACT\_MATCH** - если значение равно "N", то при фильтрации по **STOP\_LIST\_ID** будет искаться вхождение; * **URL**\* - страница хита; * **URL\_EXACT\_MATCH** - если значение равно "Y", то при фильтрации по **URL** будет искаться точное совпадение; * **URL\_404** - была ли [404 ошибка](/api_help/statistic/terms.php#404) на странице хита   + **Y** - была;   + **N** - не было. * **USER**\* - ID, логин, имя, фамилия пользователя под которым был авторизован посетитель в момент хита или до него; * **USER\_EXACT\_MATCH** - если значение равно "Y", то при фильтрации по **USER** будет искаться точное совпадение; * **REGISTERED** - флаг "был ли авторизован посетитель в момент хита или до этого", возможные значения:   + **Y** - был;   + **N** - не был. * **DATE\_1** - начальное значение интервала даты хита; * **DATE\_2** - конечное значение интервала даты хита; * **IP**\* - IP адрес посетителя в момент хита; * **IP\_EXACT\_MATCH** - если значение равно "Y", то при фильтрации по **IP** будет искаться точное совпадение; * **USER\_AGENT**\* - [UserAgent](/api_help/statistic/terms.php#user_agent) посетителя в момент хита; * **USER\_AGENT\_EXACT\_MATCH** - если значение равно "Y", то при фильтрации по **USER\_AGENT** будет искаться точное совпадение; * **COUNTRY\_ID**\* - ID страны посетителя в момент хита; * **COUNTRY\_ID\_EXACT\_MATCH** - если значение равно "Y", то при фильтрации по **COUNTRY\_ID** будет искаться точное совпадение; * **COUNTRY**\* - название страны; * **COUNTRY\_EXACT\_MATCH** - если значение равно "Y", то при фильтрации по **COUNTRY** будет искаться точное совпадение; * **COOKIE**\* - содержимое [Cookie](/api_help/statistic/terms.php#cookie) в момент хита; * **COOKIE\_EXACT\_MATCH** - если значение равно "Y", то при фильтрации по **COOKIE** будет искаться точное совпадение; * **STOP** -   + **Y** - был;   + **N** - не был. * **SITE\_ID**\* - ID сайта; * **SITE\_ID\_EXACT\_MATCH** - если значение равно "N", то при фильтрации по **SITE\_ID** будет искаться вхождение.    \* - допускается [сложная логика](/api_help/main/general/filter.php) |
| *is\_filtered* | Флаг отфильтрованности списка хитов. Если значение равно "true", то список был отфильтрован. |

### Смотрите также

* [Термин "Хит"](/api_help/statistic/terms.php#hit)

### Структура возвращаемой записи

```
Array
(
	[ID] => ID хита
	[SESSION_ID] => ID сессии
	[DATE_HIT] => время хита
	[GUEST_ID] => ID посетителя
	[NEW_GUEST] => [Y|N] флаг "был ли это новый посетитель на сайте" (Y) 
	[USER_ID] => ID пользователя под которым посетитель был авторизован (в момент хита или до этого)
	[USER_AUTH] => флаг "был ли посетитель авторизован в момент хита"
	[URL] => страница хита
	[URL_404] => была ли 404 ошибка на странице хита
	[URL_FROM] => страница откуда пришел посетитель
	[IP] => IP адрес посетитель в момент хита
	[METHOD] => HTTP метод отсылки данных
	[COOKIES] => содержимое Cookie посетителя в момент хита
	[USER_AGENT] => UserAgent посетителя в момент хита
	[STOP_LIST_ID] => ID записи стоп-листа под которую попал посетитель (если это имело место быть)
	[COUNTRY_ID] => ID страны (двухсимвольный идентификатор) посетителя сайта в момент хита (определяется по IP адресу)
	[COUNTRY_NAME] => название страны посетителя сайта в момент хита (определяется по IP адресу)
	[SITE_ID] => ID сайта (двухсимвольный идентификатор)
	[LOGIN] => логин пользователя под которым посетитель был авторизован (в момент хита или до этого)
	[USER_NAME] => имя и фамилия пользователя под которым посетитель был авторизован (в момент хита или до этого)
)Копировать
```

### Примеры использования

```
<?
// выберем хиты сессии #1056
$arFilter = array(
	"SESSION_ID" => 1056
);
// получим список записей
$rs = CHit::GetList(
	($by = "s_id"), 
	($order = "desc"), 
	$arFilter, 
	$is_filtered
);
// выведем все записи
while ($ar = $rs->Fetch())
{
	echo "<pre>"; print_r($ar); echo "</pre>";    
}
?>Копировать
```

Новинки документации в соцсетях: