[Push and Pull](/api_help/push_pull/index.php)

[Классы](/api_help/push_pull/classes/index.php)

CPushManager (11.5.0)

CPushManager
============

Включить вкладки

Описание и параметры

Удаление Push уведомления

### Описание и параметры

Класс отвечает за отправку Push уведомлений на телефон

Проверка, включена ли данная опция в настройках, если включена, то вы можете отправлять Push уведомления:

```
CPullOptions::GetPushStatus()Копировать
```

Если пользователь онлайн, то сообщение сначала попадает в таблицу рассылки на 15 секунд (в зависимости от типа выполнения агентов на сайте, время ожидания может быть выше), а после отправляется. Если пользователь офлайн, то сообщение будет отправлено сразу.

```
$CPushManager = new CPushManager();
$CPushManager->AddQueue(Array(
	'USER_ID' => 1,
	'MESSAGE' => 'Тестовое сообщение',
	'TAG' => 'IM_MESS_1',
	'SUB_TAG' => 'IM_MESS'
));Копировать
```

#### Параметры

| Параметр | Описание | С версии |
| --- | --- | --- |
| USER\_ID | Пользователь которому отправляем пуш сообщение |  |
| MESSAGE | Текст сообщения (максимум 255 символов). |  |
| TAG | Необязательный. Нужен если необходимо будет их удалить перед отправкой. |  |
| SUB\_TAG | Необязательный. Нужен если необходимо будет их удалить перед отправкой. |  |

Так же возможна передача ключа **SEND\_IMMEDIATELY = Y** для отправки сообщения без задержки, если это требует ваша логика.

**Внимание**: пользователь должен быть подписан на Push уведомления, это происходит автоматически после входа на портал через мобильное приложение.

### Удаление Push уведомления

**Удаление Push уведомления по основному тегу**

```
CPushManager:: DeleteFromQueueByTag($userId, $tag);Копировать
```

  

**Удаление Push уведомления по дополнительному тегу**

```
CPushManager:: DeleteFromQueueBySubTag($userId, $subTag);Копировать
```

**Внимание**: удаление возможно только если Push уведомление еще не отправилось пользователю.

Новинки документации в соцсетях: