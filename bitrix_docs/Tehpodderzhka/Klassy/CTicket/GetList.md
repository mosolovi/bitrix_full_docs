[Техподдержка](/api_help/support/index.php)

[Классы](/api_help/support/classes/index.php)

[CTicket](/api_help/support/classes/cticket/index.php)

GetList (3.0.1)

GetList
=======

Включить вкладки

Описание и параметры

Примеры использования

### Описание и параметры

```
record set
CTicket::GetList(
	varchar &by,
	varchar &order,
	array arFilter=array(),
	boolean &is_filtered,
	char(1) checkRights="Y",
	char(1) getUserName="Y",
);Копировать
```

Метод предназначен для получения списка обращений в техподдержку. Метод нестатический.

#### Параметры метода

| Параметр | Описание | С версии |
| --- | --- | --- |
| **by** | Идентификатор, позволяющий задать имя поля для сортировки. Допустимы следующие значения:  * s\_id - по ID * s\_lid - по сайту, для которого было создано обращение * s\_lamp - по индикатору * s\_date\_create - по дате создания * s\_timestamp - по дате изменения * s\_date\_close - по дате закрытия * s\_owner - по автору * s\_modified\_by - по ID пользователя - изменившего обращение * s\_title - по заголовку * s\_responsible - по ID ответственного * s\_messages - по количеству сообщений * s\_category - по ID категории * s\_criticality - по ID критичности * s\_status - по ID статуса * s\_mark - по ID оценки * s\_online - по количеству пользователей |  |
| **order** | Порядок сортировки. Допустимы следующие значения:  * desc - по убыванию (значение по умолчанию) * asc - по возрастанию |  |
| **arFilter** | Массив для фильтрации значений. Необязательный параметр. В массиве допустимы следующие индексы:  * ID - ID обращения (допускается сложная логика) * ID\_EXACT\_MATCH - "Y" - при фильтрации по ID обращения будет искаться точное совпадение (по умолчанию); "N" - в противном случае будет искаться вхождение * LID - ID сайта * LID\_EXACT\_MATCH - "Y" - при фильтрации по ID языка будет искаться точное совпадение (по умолчанию); "N" - в противном случае будет искаться вхождение * LAMP - массив индикаторов: "red", "yellow", "green", "green\_s", "grey" * DATE\_CREATE\_1 - левая часть интервала для даты создания обращения * DATE\_CREATE\_2 - правая часть интервала для даты создания обращения * DATE\_TIMESTAMP\_1 - левая часть интервала для даты модификации обращения * DATE\_TIMESTAMP\_2 - правая часть интервала для даты модификации обращения * DATE\_CLOSE\_1 - левая часть интервала для даты закрытия обращения * DATE\_CLOSE\_2 - правая часть интервала для даты закрытия обращения * AUTO\_CLOSE\_DAYS1 - левая часть интервала для количества дней по истечении которых обращение будет автоматически закрыто при отсутствии ответа от автора * AUTO\_CLOSE\_DAYS2 - правая часть интервала для количества дней по истечении которых обращение будет автоматически закрыто при отсутствии ответа от автора * TICKET\_TIME\_1 - левая часть интервала для количества дней прошедших с даты создания до даты закрытия обращения * TICKET\_TIME\_2 - правая часть интервала для количества дней прошедших с даты создания до даты закрытия обращения * TITLE - заголовок обращения (допускается сложная логика) * TITLE\_EXACT\_MATCH - "Y" - при фильтрации по заголовку обращения будет искаться точное совпадение (по умолчанию); "N" - в противном случае будет искаться вхождение * MESSAGES1 - левая часть интервала для количества сообщений в обращении * MESSAGES2 - правая часть интервала для количества сообщений в обращении * OWNER - автор обращения, поиск осуществляется по ID пользователя, логину, имени, фамилии, символному коду (допускается сложная логика) * OWNER\_EXACT\_MATCH - "Y" - при фильтрации по автору обращения будет искаться точное совпадение (по умолчанию); "N" - в противном случае будет искаться вхождение * CREATED\_BY - кем было создано обращение, поиск осуществляется по ID пользователя, логину, имени, фамилии, названии модуля из которого было создано обращение (допускается сложная логика) * CREATED\_BY\_EXACT\_MATCH - "Y" - при фильтрации по создателю обращения будет искаться точное совпадение (по умолчанию); "N" - в противном случае будет искаться вхождение * MODIFIED\_BY - изменивший обращение, поиск осуществляется по ID пользователя, логину, имени, фамилии, названии модуля из которого было изменено обращение (допускается сложная логика) * MODIFIED\_BY\_EXACT\_MATCH - "Y" - при фильтрации по символьному коду статуса будет искаться точное совпадение (по умолчанию); "N" - в противном случае будет искаться вхождение * RESPONSIBLE - ответственный за обращение, поиск осуществляется по ID пользователя, логину, имени, фамилии (допускается сложная логика) * RESPONSIBLE\_EXACT\_MATCH - "Y" - при фильтрации по ответственному за обращение будет искаться точное совпадение (по умолчанию); "N" - в противном случае будет искаться вхождение * RESPONSIBLE\_ID - ID пользователя ответственного за обращение, при задании "0" будут выбраны только те обращения у которых нет ответственного * CATEGORY - ID категории обращения (0 - без категории) * CATEGORY\_SID - символьный код категории обращения (допускается сложная логика) * CATEGORY\_SID\_EXACT\_MATCH - "Y" - при фильтрации по символьному коду категории будет искаться точное совпадение (по умолчанию); "N" - в противном случае будет искаться вхождение * CRITICALITY - ID критичности обращения (0 - без критичности) * CRITICALITY\_SID - символьный код критичности обращения (допускается сложная логика) * CRITICALITY\_SID\_EXACT\_MATCH - "Y" - при фильтрации по символьному коду критичности будет искаться точное совпадение (по умолчанию); "N" - в противном случае будет искаться вхождение * STATUS - ID статуса обращения (0 - без статуса) * STATUS\_SID - символьный код статуса обращения (допускается сложная логика) * STATUS\_SID\_EXACT\_MATCH - "Y" - при фильтрации по символьному коду статуса будет искаться точное совпадение (по умолчанию); "N" - в противном случае будет искаться вхождение * MARK\_SID\_EXACT\_MATCH - "Y" - при фильтрации по символьному коду оценки ответа будет искаться точное совпадение (по умолчанию); "N" - в противном случае будет искаться вхождение * MARK - ID оценки ответов (0 - без оценки) * MARK\_SID - символьный код оценки ответов (допускается сложная логика) * SOURCE - ID источника (0 - источник "web") * SOURCE\_SID - символьный код источника (допускается сложная логика) * SOURCE\_SID\_EXACT\_MATCH - "Y" - при фильтрации по символьному коду источника будет искаться точное совпадение (по умолчанию); "N" - в противном случае будет искаться вхождение * MESSAGE - текст сообщения (допускается сложная логика) * MESSAGE\_EXACT\_MATCH - "Y" - при фильтрации по сообщению будет искаться точное совпадение (по умолчанию); "N" - в противном случае будет искаться вхождение * LAST\_MESSAGE\_USER\_ID - ID пользователя написавшего последнее сообщение в обращении (допускается сложная логика) * LAST\_MESSAGE\_USER\_ID\_EXACT\_MATCH - "Y" - при фильтрации по ID пользователя написавшего последнее сообщение в обращении будет искаться точное совпадение (по умолчанию); "N" - в противном случае будет искаться вхождение * LAST\_MESSAGE\_SID - символьный идентификатор написавшего последнее сообщение в обращении (если источник "email", то это может быть email, если источник "телефон", то это может быть номер телефона) (допускается сложная логика) * LAST\_MESSAGE\_SID\_EXACT\_MATCH - "Y" - при фильтрации по символьному идентификатору пользователя написавшего последнее сообщение в обращении будет искаться точное совпадение (по умолчанию); "N" - в противном случае будет искаться вхождение * SUPPORT\_COMMENTS - комментарий техподдержки, видимый в стандартных формах только для пользователей входящих в группу техподдержки * SUPPORT\_COMMENTS\_EXACT\_MATCH - "Y" - при фильтрации по ID пользователя написавшего последнее сообщение в обращении будет искаться точное совпадение (по умолчанию); "N" - в противном случае будет искаться вхождение * SITE\_ID - идентификатор сайта * CLOSE - Y\N - закрыт тикет, или нет * S\_SPAM - Y\N - флаг, является ли тикет спамом * IS\_OVERDUE - Y\N - флаг, просрочен ли тикет. * SLA\_ID - по ID уровня техподдержки (допускается сложная логика). * SUPPORTTEAM\_GROUP\_ID - по ID группы техподдержки (число или массив чисел). * CLIENT\_GROUP\_ID - Y\N - по ID группы клиентов (число или массив чисел). |  |
| **is\_filtered** | Переменная возвращающая true в том случае если список результатов отфильтрован по какому либо критерию; либо false в противном случае. Изменен на **isFiltered** c 12.0.0 |  |
| **checkRights** | Необязательный параметр. "Y" - будут выбраны только те обращения которые текущий пользователь может просматривать (по умолчанию); "N" - выбирать все обращения независимо от прав текущего пользователя. До версии 12.0.0 назывался **check\_rights**. | 3.3.9 |
| **getUserName** | Необязательный параметр. "Y" - при выборке обращений будут также выбраны такие поля как OWNER\_LOGIN, OWNER\_NAME, RESPONSIBLE\_LOGIN, RESPONSIBLE\_NAME, MODIFIED\_LOGIN, MODIFIED\_NAME, LAST\_MESSAGE\_LOGIN, LAST\_MESSAGE\_NAME, CREATED\_LOGIN, CREATED\_EMAIL, CREATED\_NAME, описывающие параметры пользователей имевших отношение к данному обращению (по умолчанию); "N" - вышеперечисленные поля не будут выбраны, но зато это ускорит работу метода. До версии 12.0.0 назывался **get\_user\_name**. | 3.3.15 |
| **get\_dictionary\_name** | Необязательный параметр. "Y" - при выборке обращений будут также выбраны такие поля как CATEGORY\_NAME, CATEGORY\_SID, CRITICALITY\_NAME, CRITICALITY\_SID, STATUS\_NAME, STATUS\_SID, MARK\_NAME, MARK\_SID, SOURCE\_NAME, SOURCE\_SID, описывающие поля из справочника техподдержки (по умолчанию); "N" - вышеперечисленные поля не будут выбраны, но зато это ускорит работу метода. Удален с 4.0.6 | 3.3.15 |
| **lang** | Двухсимвольный код языка в формате которого необходимо выбрать временные параметры обращения (время создания, изменения, закрытия); необязательный параметр, по умолчанию - код текущего сайта. Удален с 4.0.0 | 3.3.15 |
| **siteID** | Необязательный параметр. Значение по умолчанию - "false". До версии 12.0.0 назывался **site\_id**. | 4.0.0 |
| **getExtraNames** | Необязательный параметр. Значение по умолчанию - "Y". | 4.0.6 |
| **arParams** | Необязательный параметр. | 12.0.0 |

### Примеры использования

```
<?
$FilterArr = Array(
	"find_id",
	"find_lid",
	"find_lamp",
	"find_date_create1",
	"find_date_create2",
	"find_date_timestamp1",
	"find_date_timestamp2",
	"find_date_close1",
	"find_date_close2",
	"find_close",
	"find_ticket_time_1",
	"find_ticket_time_2",
	"find_title",
	"find_messages1",
	"find_messages2",
	"find_owner",
	"find_created_by",
	"find_responsible",
	"find_responsible_id",
	"find_category_id",
	"find_criticality_id",
	"find_status_id",
	"find_mark_id",
	"find_source_id",
	"find_modified_by",
	"find_message"
);
if (strlen($set_filter)>0) InitFilterEx($FilterArr,"TICKET_LIST","set",true); else InitFilterEx($FilterArr,"TICKET_LIST","get",true);
if (strlen($del_filter)>0) DelFilterEx($FilterArr,"TICKET_LIST",true);
if (CheckFilter())
{
	$arFilter = Array(
		"ID"                => $find_id,
		"LID"               => $find_lid,
		"LAMP"              => $find_lamp,
		"DATE_CREATE_1"     => $find_date_create1,
		"DATE_CREATE_2"     => $find_date_create2,
		"DATE_TIMESTAMP_1"  => $find_date_timestamp1,
		"DATE_TIMESTAMP_2"  => $find_date_timestamp2,
		"DATE_CLOSE_1"      => $find_date_close1,
		"DATE_CLOSE_2"      => $find_date_close2,
		"CLOSE"             => $find_close,
		"TICKET_TIME_1"     => $find_ticket_time_1,
		"TICKET_TIME_2"     => $find_ticket_time_2,
		"TITLE"             => $find_title,
		"MESSAGES1"         => $find_messages1,
		"MESSAGES2"         => $find_messages2,
		"OWNER"             => $find_owner,
		"CREATED_BY"        => $find_created_by,
		"RESPONSIBLE"       => $find_responsible,
		"RESPONSIBLE_ID"    => $find_responsible_id,
		"CATEGORY"          => $find_category_id,
		"CRITICALITY"       => $find_criticality_id,
		"STATUS"            => $find_status_id,
		"MARK"              => $find_mark_id,
		"SOURCE"            => $find_source_id,
		"MODIFIED_BY"       => $find_modified_by,
		"MESSAGE"           => $find_message
	);
}
$tickets = CTicket::GetList($by, $order, $arFilter, $is_filtered);
?>Копировать
```

Новинки документации в соцсетях: