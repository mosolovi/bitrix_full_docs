[Техподдержка](/api_help/support/index.php)

[Классы](/api_help/support/classes/index.php)

[CTicket](/api_help/support/classes/cticket/index.php)

GetMessageList (3.3.5)

GetMessageList
==============

Включить вкладки

Описание и параметры

Примеры использования

### Описание и параметры

```
record set
CTicket::GetMessageList(
	varchar &by,
	varchar &order,
	array arFilter=array(),
	boolean &is_filtered,
	char(1) CHECK_RIGHTS="Y",
	char(1) get_user_name="Y"
);Копировать
```

Метод предназначен для получения списка сообщений в одном обращении. Метод нестатический.

#### Параметры метода

| Параметр | Описание | С версии | Удалён с версии |
| --- | --- | --- | --- |
| **TICKET\_ID** |  |  | 3.3.16 |
| **by** | Идентификатор позволяющий задать имя поля для сортировки. Допустимы следующие значения:  * s\_id - по ID * s\_number - по порядковому номеру | 3.3.16 |  |
| **order** | Порядок сортировки. Допустимы следующие значения:  * desc - по убыванию * asc - по возрастанию (значение по умолчанию) | 3.3.16 |  |
| **arFilter** | Массив для фильтрации значений. В массиве допустимы следующие индексы:  * ID - ID сообщения (допускается сложная логика); * TICKET\_ID - ID обращения; * TICKET - (допускается сложная логика); * IS\_MESSAGE - Позволяет получить список именно сообщений. В противном случае в списке сообщений будет много мусора, например, сообщения об изменении статуса. * IS\_HIDDEN - "Y" - будут выбраны только скрытые сообщения; "N" - будут выбраны все не скрытые сообщения; * IS\_LOG - "Y" - будут выбраны только лог-записи (записи изменений); "N" - будут выбраны не лог-записи; * IS\_OVERDUE - "Y" - будут выбраны только просроченные сообщения; "N" - будут выбраны не просроченные сообщения; * NOT\_CHANGE\_STATUS - "Y" - будут выбраны только неизменённые сообщения; "N" - будут выбраны изменённые сообщения; * MESSAGE\_BY\_SUPPORT\_TEAM - "Y" - будут выбраны сообщения от сотрудников техподдержки; "N" - будут выбраны все сообщения; * EXTERNAL\_FIELD\_1 - (допускается сложная логика)  Необязательный параметр. | 3.3.11 |  |
| **is\_filtered** | Переменная возвращающая true в том случае если список результатов отфильтрован по какому либо критерию; либо false в противном случае. Изменен на **isFiltered** с версии 12.0.0 | 3.3.16 |  |
| **CHECK\_RIGHTS** | Флаг необходимости проверки прав текущего пользователя:  * Y - будут выбраны только те сообщения которые данные пользователь может просматривать (по умолчанию) * N - выбирать все сообщения независимо от прав текущего пользователя  Необязательный параметр. Изменен на **checkRights** с версии 12.0.0 | 3.3.11 |  |
| **get\_user\_name** | Необязательный параметр. "Y" - при выборке сообщения будут также выбраны такие поля, как OWNER\_EMAIL, OWNER\_LOGIN, OWNER\_NAME, CREATED\_EMAIL, CREATED\_LOGIN, CREATED\_NAME, MODIFIED\_EMAIL, MODIFIED\_LOGIN, MODIFIED\_NAME, описывающие параметры пользователей имевших отношение к данному сообщению (по умолчанию); "N" - вышеперечисленные поля не будут выбраны, но зато это ускорит работу метода. Изменен на **getUserName** с версии 12.0.0 | 3.3.16 |  |
| **old\_call** | Необязательный параметр. Значение по умолчанию - "N". | 3.3.15 | 3.3.16 |

### Примеры использования

```
<?
$mess = CTicket::GetMessageList($a, $b, array("TICKET_ID" => $ID, "TICKET_ID_EXACT_MATCH" => "Y"), $c, $CHECK_RIGHTS);
$mess->NavStart(50);
$messages = $mess->SelectedRowsCount();
?>Копировать
```

Новинки документации в соцсетях: