[Форум](/api_help/forum/index.php)

Структура таблиц модуля форумов

Структура таблиц модуля форумов
===============================

Включить вкладки

Группы форумов

Форумы

Сообщения

Профайл посетителя форума

Звания (статусы) посетителей

Языковые параметры званий

Карта соответствий сообщений/баллов

Смайлы и иконки

Подписка

Приватные сообщения

Папки пользователя

Словари

### Группы форумов

| Поле | Описание | Тип | Обяз. | Умолч. |
| --- | --- | --- | --- | --- |
| ID | ID группы форумов. Уникален. | Int | Да |  |
| SORT | Индекс сортировки. | Int | Да | 150 |

#### Сайтозависимые параметры групп форумов

| Поле | Описание | Тип | Обяз. | Умолч. |
| --- | --- | --- | --- | --- |
| FORUM\_GROUP\_ID | ID группы форумов | Int | Да |  |
| LID | Код сайта | Char(2) | Да |  |
| NAME | Название группы форумов | String(255) | Да |  |
| DESCRIPTION | Описание группы форумов | String(255) | Нет |  |

### Форумы

| Поле | Описание | Тип | Обяз. | Умолч. |
| --- | --- | --- | --- | --- |
| ID | ID форума. Уникален. | Int | Да |  |
| NAME | Название форума | String(128) | Да |  |
| DESCRIPTION | Описание форума | String(255) | Нет |  |
| SORT | Индекс сортировки | Int | Да | 150 |
| ACTIVE | Активность форума (Y|N) | Char(1) | Да | Y |
| ALLOW\_HTML | Разрешить вводить в качестве сообщения произвольный HTML (Y|N) | Char(1) | Да | N |
| *ALLOW\_NL2BR* | Преобразовывать переводы каретки в тег <br> в режиме HTML (Y|N) | Char(1) | Да | N |
| ALLOW\_ANCHOR | Разрешить использовать в сообщениях тег <a> / [a] (Y|N) | Char(1) | Да | Y |
| ALLOW\_BIU | Разрешить использовать в сообщениях теги <b> / [b], <i> / [i], <u> / [u] (Y|N) | Char(1) | Да | Y |
| ALLOW\_IMG | Разрешить использовать в сообщениях тег <img> / [img] (Y|N) | Char(1) | Да | Y |
| ALLOW\_LIST | Разрешить использовать в сообщениях тег списка <ul> / [list] (Y|N) | Char(1) | Да | Y |
| ALLOW\_QUOTE | Разрешить использовать в сообщениях тег цитирования <quote> / [quote] (Y|N) | Char(1) | Да | Y |
| ALLOW\_CODE | Разрешить использовать в сообщениях тег кода <code> / [code] (Y|N) | Char(1) | Да | Y |
| ALLOW\_FONT | Разрешить использовать в сообщениях тег <font> / [color], [font] (Y|N) | Char(1) | Да | Y |
| ALLOW\_SMILES | Разрешить использовать в сообщениях смайлики в виде изображений (Y|N) | Char(1) | Да | Y |
| ALLOW\_UPLOAD | Разрешить загрузку файлов, привязанных с сообщениям форума. Возможные значения: N - загрузка запрещена, Y - только файлы изображений, F - файлы с заданными в поле ALLOW\_UPLOAD\_EXT расширениями, A - любые файлы. | Char(1) | Да | N |
| MODERATION | Премодерируемость форума (Y|N) | Char(1) | Да | N |
| ORDER\_BY | Сортировка "по умолчанию" тем форума в списке тем. Возможные значения: T - заголовок темы, N - количество сообщений в теме, A - автор темы, V - количество просмотров темы, D - дата создания темы, P - дата последнего сообщения в теме. | Char(1) | Да | P |
| ORDER\_DIRECTION | Направление сортировки "по умолчанию" тем форума в списке тем. Возможные значения: ASC - прямой порядок, DESC - обратный порядок. | Char(4) | Да | DESC |
| TOPICS | Количество опубликованых тем в форуме. | Int | Да | 0 |
| POSTS | Количество опубликованых сообщений в форуме. | Int | Да | 0 |
| LAST\_POSTER\_ID | Код автора (код пользователя) последнего сообщения на форуме. | Int | Нет |  |
| LAST\_POSTER\_NAME | Имя автора последнего сообщения на форуме. | varchar(255) | Нет |  |
| LAST\_POST\_DATE | Дата последнего сообщения на форуме. | DateTime | Нет |  |
| LAST\_MESSAGE\_ID | ID последнего сообщения на форуме. | Int | Нет |  |
| ALLOW\_UPLOAD\_EXT | Список разделенных запятой расширений файлов, которые разрешены к загрузке. Применяется, если в поле ALLOW\_UPLOAD стоит значение F. | String(255) | Нет |  |
| FORUM\_GROUP\_ID | Код группы, к которой принадлежит форум. | Int | Нет |  |
| ASK\_GUEST\_EMAIL | Спрашивать Email у незарегистрированого пользователя при написании сообщения (Y/N) | Char(1) | Нет | N |

#### Связь форума с сайтами

| Поле | Описание | Тип | Обяз. | Умолч. |
| --- | --- | --- | --- | --- |
| FORUM\_ID | ID форума. | Int | Да |  |
| SITE\_ID | Код сайта. | Char(2) | Да |  |
| PATH2FORUM\_MESSAGE | Шаблон пути к сообщению на форуме. Может содержать подстроки #FORUM\_ID#, #TOPIC\_ID# и #MESSAGE\_ID#, которые должны быть заменены на реальные код форума, код темы и код сообщения. | varchar(250) | Нет |  |

#### Темы форума

| Поле | Описание | Тип | Обяз. | Умолч. |
| --- | --- | --- | --- | --- |
| ID | ID темы форума. Уникален. | Int | Да |  |
| TOPIC\_ID | Указатель на тему-ссылку. Используется, если STATE=L. | bigint(20) | Нет |  |
| TITLE | Заголовок темы | String(70) | Да |  |
| TITLE\_SEO | Информация для навигации | varchar(255) null | Нет |  |
| DESCRIPTION | Описание темы. | String(70) | Нет |  |
| TAGS | Теги темы. | varchar(255) | Нет |  |
| STATE | Состояние темы: открыта или закрыта (Y|N). | Char(1) | Да | Y |
| USER\_START\_ID | Код автора темы. | Int | Нет |  |
| USER\_START\_NAME | Имя автора темы. | String(64) | Да |  |
| START\_DATE | Дата создание темы. | DateTime | Да |  |
| ICON\_ID | Код иконки темы. | Int | Нет |  |
| POSTS | Количество ответов на тему. | Int | Да | 0 |
| POSTS\_UNAPPROVED | Количество неодобренных сообщений в теме. | int(11) | Нет | 0 |
| VIEWS | Количество просмотров темы. | Int | Да | 0 |
| FORUM\_ID | ID форума, которому принадлежит тема. | Int | Да |  |
| APPROVED | Опубликована ли тема (Y|N). Тема опубликована, если опубликовано хотя бы одно сообщение в ней. | Char(1) | Да | Y |
| SORT | Индекс сортировки темы | Int | Да | 150 |
| LAST\_POSTER\_ID | Код автора последнего сообщения в теме. | Int | Нет |  |
| LAST\_POSTER\_NAME | Имя автора последнего сообщения в теме. | varchar(255) | Да |  |
| LAST\_POST\_DATE | Дата последнего сообщения в теме. | DateTime | Да |  |
| LAST\_MESSAGE\_ID | ID последнего сообщения в теме | Int | Да |  |
| ABS\_\* | Четыре последних поля могут иметь указанную приставку. В этом случае их значения видны только модераторам. | | | |

### Сообщения

| Поле | Описание | Тип | Обяз. | Умолч. |
| --- | --- | --- | --- | --- |
| ID | ID сообщения. Уникальное. | Int | Да |  |
| AUTHOR\_ID | Код автора сообщения. | Int | Нет |  |
| AUTHOR\_NAME | Имя автора сообщения. | String(128) | Да |  |
| AUTHOR\_IP | IP автора сообщения | String(128) | Нет |  |
| USE\_SMILES | Пользователь хочет, чтобы смайлики заменялись графическими изображениями (Y|N). | Char(1) | Да | Y |
| POST\_DATE | Дата создания сообщения. | Datetime | Да |  |
| POST\_MESSAGE | Текст сообщения. | Text | Да |  |
| FORUM\_ID | ID форума, которому принадлежит сообщение. | Int | Да |  |
| TOPIC\_ID | ID темы, которой принадлежит сообщение. | Int | Да |  |
| APPROVED | Сообщение опубликовано (Y|N) | Char(1) | Да | Y |
| GUEST\_ID | Код посетителя | Int | Нет |  |
| AUTHOR\_REAL\_IP | Реальный IP автора сообщения. | Int | Нет |  |
| ATTACH\_IMG | Присоедененный файл. | Int | Нет |  |

### Профайл посетителя форума

| Поле | Описание | Тип | Обяз. | Умолч. |
| --- | --- | --- | --- | --- |
| ID | ID профайла. Уникален. | Int | Да |  |
| USER\_ID | ID пользователя. Уникален. | Int | Да |  |
| DESCRIPTION | Описание посетителя. | String(64) | Нет |  |
| IP\_ADDRESS | IP адрес, с которого было отправлено последнее сообщение. | String(128) | Да |  |
| AVATAR | Аватар посетителя. Массив, описывающий файл, полученный, например, через **CFile::MakeFileArray** | Array | Нет |  |
| NUM\_POSTS | Количество сообщений посетителя на форуме. | Int | Да | 0 |
| INTERESTS | Интересы посетителя (произвольная текстовая информация). | Text | Нет |  |
| LAST\_POST | Код последнего сообщения постетителя. | Int | Нет |  |
| ALLOW\_POST | Посетитель может писать сообщения (т.е. не забанен). | Char(1) | Да | Y |
| LAST\_VISIT | Дата последнего посещения форума | DateTime | Да |  |
| DATE\_REG | Дата регистрации на форуме | DateTime | Да |  |
| REAL\_IP\_ADDRESS | Настоящий IP адрес, с которого было написано последнее сообщение. | String(128) | Нет |  |
| SIGNATURE | Подпись посетителя. | String(255) | Нет |  |
| SHOW\_NAME | Показывать имя и фамилию вместо логина (Y|N) | Char(1) | Да | Y |
| HIDE\_FROM\_ONLINE | Не показывать пользователя в списке "Кто сейчас на сайте" (Y/N) | Char(1) | Нет | N |
| POINTS | Текущее количество баллов пользователя | Int | Нет | 0 |

### Звания (статусы) посетителей

| Поле | Описание | Тип | Обяз. | Умолч. |
| --- | --- | --- | --- | --- |
| ID | ID звания. Уникален. |  | Да |  |
| MIN\_POINTS | Количество баллов, которое необходимо иметь для получения этого звания. | Int | Да | 0 |
| CODE | Символьный код звания. | varchar(100) | Нет |  |
| VOTES | Количество голосов, которое пользователь в этом звании может отдать за другого пользователя | Int | Да | 0 |

### Языковые параметры званий

| Поле | Описание | Тип | Обяз. | Умолч. |
| --- | --- | --- | --- | --- |
| POINTS\_ID | ID звания | Int | Да |  |
| LID | Код языка параметров | Char(2) | Да |  |
| NAME | Название звания | String(250) | Да |  |

### Карта соответствий сообщений/баллов

Карта соответствий между количеством сообщений пользователя на форуме и количеством баллов за сообщение.

  

| Поле | Описание | Тип | Обяз. | Умолч. |
| --- | --- | --- | --- | --- |
| ID | ID записи. Первичный ключ. | Int | Да |  |
| MIN\_NUM\_POSTS | Количество сообщений, которое нужно написать для получения этого количества баллов за сообщение. | Int | Да | 0 |
| POINTS\_PER\_POST | Количество баллов за сообщение. Может быть дробным числом (0.1 - балл дается за 10 сообщений) | decimal(18, 4) | Да | 0 |

### Смайлы и иконки

| Поле | Описание | Тип | Обяз. | Умолч. |
| --- | --- | --- | --- | --- |
| ID | ID смайла. Уникален. |  | Да |  |
| TYPE | Тип: S - смайл, I - иконка. | Char(2) | Да | S |
| TYPING | Варианты написания смайлов, перечисленные через пробел. | String(100) | Да |  |
| IMAGE | Название файла изображения. | String(128) | Да |  |
| SORT | Индекс сортировки. | Int | Да | 150 |
| IMAGE\_WIDTH | Ширина изображения. | Int | Да | 0 |
| IMAGE\_HEIGHT | Высота изображения. | Int | Да | 0 |

#### Языковые параметры смайлов

| Поле | Описание | Тип | Обяз. | Умолч. |
| --- | --- | --- | --- | --- |
| SMILE\_ID | ID смайла | Int | Да |  |
| LID | Код языка параметров | Char(2) | Да |  |
| NAME | Название смайла | String(255) | Да |  |

### Подписка

| Поле | Описание | Тип | Обяз. | Умолч. |
| --- | --- | --- | --- | --- |
| ID | ID подписки | Int | Да |  |
| USER\_ID | ID подписанного пользователя | Int | Да |  |
| FORUM\_ID | Форум, на сообщения которого подписан | Int | Да |  |
| TOPIC\_ID | Тема, на сообщения которой подписан | Int | Нет |  |
| START\_DATE | Дата подписки | DateTime | Да |  |
| LAST\_SEND | ID последнего отправленного сообщения | Int | Нет |  |
| NEW\_TOPIC\_ONLY | Подписка только на новые темы (Y/N) | Char(1) | Да | N |
| SITE\_ID | ID сайта, на котором произведена подписка | Char(2) | Да | ru |

### Приватные сообщения

| Поле | Описание | Тип | Обяз. | Умолч. |
| --- | --- | --- | --- | --- |
| ID | ID сообщения. Уникален. | Int | Да |  |
| AUTHOR\_ID | ID автора сообщения. | Int | Да |  |
| USER\_ID | ID получателя сообщения. | Int | Да |  |
| FOLDER\_ID | ID папки пользователя. | Int | Да |  |
| IS\_READ | Метка о прочтении. | Int | Да |  |
| USE\_SMILES | Заменять смайлики графическими изображениями (Y|N). | Int | Да |  |
| POST\_DATE | Дата создания сообщения. | DateTime | Да |  |
| POST\_SUBJ | Тема сообщения. | String(255) | Нет |  |
| POST\_MESSAGE | Текст сообщения. | Text | Нет |  |

### Папки пользователя

| Поле | Описание | Тип | Обяз. | Умолч. |
| --- | --- | --- | --- | --- |
| ID | ID папки. Уникален. | Int | Да |  |
| TITLE | ID автора сообщения. | String(50) | Да |  |
| USER\_ID | ID владельца папки. | Int | Да |  |

### Словари

| Поле | Описание | Тип | Обяз. | Умолч. |
| --- | --- | --- | --- | --- |
| ID | ID записи. Уникален. | Int | Да |  |
| TITLE | Имя словаря. | String(50) | Да |  |
| TYPE | Тип словаря. | Char | Да |  |

#### Словарь букв

| Поле | Описание | Тип | Обяз. | Умолч. |
| --- | --- | --- | --- | --- |
| ID | ID записи. Уникален. | Int | Да |  |
| DICTIONARY\_ID | ID словаря. | Int | Да |  |
| LETTER | Буква. | String(50) | Да |  |
| REPLACEMENT | Замена. | String(50) | Да |  |

#### Словарь слов

| Поле | Описание | Тип | Обяз. | Умолч. |
| --- | --- | --- | --- | --- |
| ID | ID записи. Уникален. | Int | Да |  |
| DICTIONARY\_ID | ID словаря. | Int | Да |  |
| WORDS | Слово. | String(255) | Нет |  |
| PATTERN | Шаблон. | String(255) | Нет |  |
| REPLACEMENT | Замена. | String(255) | Нет |  |
| DESCRIPTION | Описание. | Text | Нет |  |
| REPLACEMENT | Замена. | String(50) | Да |  |
| USE\_IT | Задействован (Y|N). | Char | Да |  |

Новинки документации в соцсетях: