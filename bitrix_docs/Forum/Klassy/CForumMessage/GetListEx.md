[Форум](/api_help/forum/index.php)

[Классы](/api_help/forum/developer/index.php)

[CForumMessage](/api_help/forum/developer/cforummessage/index.php)

GetListEx (доступен с 3.3.3)

GetListEx
=========

Включить вкладки

Описание и параметры

Смотрите также

Примеры использования

### Описание и параметры

```
CDBResult
CForumMessage::GetListEx(
	array arOrder = Array("ID"=>"ASC"),
	array arFilter = Array(),
	bool bCount  = false,
	int iNum = 0,
	array arAddParams = Array()
);Копировать
```

Возвращает список сообщений (включая связанные данные) по фильтру **arFilter**, отсортированный в соответствии с **arOrder**. Метод статический.

#### Параметры функции

| Параметр | Описание | C версии |
| --- | --- | --- |
| arOrder | Массив для сортировки результата. Массив вида *array("поле сортировки"=>"направление сортировки" [, ...])*. Поле для сортировки может принимать значения:  * **AUTHOR\_NAME** - имя автора сообщения; * **POST\_DATE** - дата создания сообщения; * **FORUM\_ID** - ID форума; * **TOPIC\_ID** - ID темы; * **ID** - ID сообщения; * **USE\_SMILES** - разрешено заменять смайлики на их графические изображения; * **NEW\_TOPIC** - новая тема; * **APPROVED** - опубликовано; * **POST\_DATE** - дата создания сообщения; * **POST\_MESSAGE** - сообщение; * **ATTACH\_IMG** - присоединенная картинка; * **PARAM1** - первый параметр элемента; * **PARAM2** - второй параметр элемента; * **AUTHOR\_ID** - ID автора сообщения; * **AUTHOR\_EMAIL** - e-mail автора сообщения; * **AUTHOR\_IP** - IP-адрес автора сообщения; * **AUTHOR\_REAL\_IP** - реальный IP-адрес автора сообщения; * **GUEST\_ID** - ID посетителя; * **EDITOR\_ID** - ID того, кто отредактировал сообщение; * **EDITOR\_NAME** - имя того, кто отредактировал сообщение; * **EDITOR\_EMAIL** - e-mail того, кто отредактировал сообщение; * **EDIT\_REASON** - причина редактирования сообщения; * **EDIT\_DATE** - дата редактирования сообщения;  Направление сортировки может принимать значения:  * **ASC** - по возрастанию; * **DESC** - по убыванию;  Необязательный. По умолчанию равен Array("ID"=>"ASC") |  |
| arFilter | Массив вида *array("фильтруемое поле"=>"значение фильтра" [, ...])*. Фильтруемое поле может принимать значения:  * **ID** - ID сообщения; * **AUTHOR\_NAME** - имя автора сообщения; * **AUTHOR\_ID** - ID автора сообщения; * **FORUM\_ID** - ID форума; * **TOPIC\_ID** - ID темы; * **APPROVED** - опубликовано; * **PARAM1** - первый параметр элемента; * **PARAM2** - второй параметр элемента; * **APPROVED** - опубликовано; * **NEW\_TOPIC** - новая тема; * **POST\_MESSAGE** - сообщение; * **ATTACH\_IMG** - присоединенная картинка; * **POST\_DATE** - дата создания сообщения; * **USER\_ID** - ID пользователя; * **NEW\_MESSAGE** - новое сообщение; * **USER\_GROUP** - группа пользователя; * **TOPIC\_SOCNET\_GROUP\_ID** - ID группы соцсети; * **TOPIC\_OWNER\_ID** - ID владельца темы; * **TOPIC** - тема; * **TOPIC\_TITLE** - название темы; * **TITLE** - название сообщения;  Перед названием фильтруемого поля может быть указан тип фильтрации:  * "!" - не равно * "<" - меньше * "<=" - меньше либо равно * ">" - больше * ">=" - больше либо равно  Необязательное. По умолчанию записи не фильтруются. |  |
| bCount | Если параметр равен True, то возвращается только количество сообщений, которое соответствует установленному фильтру. Необязательный. По умолчанию равен False. |  |
| iNum | Ограничение числа возвращаемых записей. Если параметр iNum отличен от нуля, то возвращается не более iNum записей. Поддерживается не для всех баз данных. Если параметр не поддерживается, то его установки игнорируются. Необязательный. По умолчанию равен 0. |  |
| arAddParams | Массив параметров. | 4.0.3 |

#### Возвращаемое значение

Возвращается объект [CDBResult](/api_help/main/reference/cdbresult/index.php)

### Смотрите также

* [CDBResult](/api_help/main/reference/cdbresult/index.php)
* [Поля сообщения](/api_help/forum/fields.php#cforummessage)

### Примеры использования

```
<?
// выберем все опубликованные сообщения темы с кодом $TID в порядке, обратном поступлению
$db_res = CForumMessage::GetListEx(array("ID"=>"DESC"), array("TOPIC_ID"=>$TID));
while ($ar_res = $db_res->Fetch())
{
	echo "<pre>";
	print_r($ar_res);
	echo "</pre><br>";
}
?>Копировать
```

```
<?
// Для выборки сообщений из нескольких топиков можно использовать код:
cmodule::includemodule('forum');
$res = CForumMessage::GetListEx(array("POST_DATE"=>"DESC"), array('@TOPIC_ID'=>array(6,7)), false, 2);
while($arMessages = $res->Fetch())
{
	echo "<pre>";
	print_r($arMessages["POST_MESSAGE"]);
	echo "</pre>";
}
?>Копировать
```

Новинки документации в соцсетях: