[Форум](/api_help/forum/index.php)

[Классы](/api_help/forum/developer/index.php)

[CForumMessage](/api_help/forum/developer/cforummessage/index.php)

GetList (доступен с 3.3.3)

GetList
=======

Включить вкладки

Описание и параметры

Смотрите также

Примеры использования

### Описание и параметры

```
CDBResult
CForumMessage::GetList(
	array arOrder = Array("ID"=>"ASC"),
	array arFilter = Array(),
	bool bCount  = false,
	int iNum = 0,
	array arAddParams = Array()
);Копировать
```

Возвращает список сообщений по фильтру **arFilter**, отсортированый в соответствии с **arOrder**. Метод статический.

#### Параметры функции

| Параметр | Описание | C версии |
| --- | --- | --- |
| arOrder | Массив для сортировки результата. Массив вида *array("поле сортировки"=>"направление сортировки" [, ...])*. Поле для сортировки может принимать значения:  * **AUTHOR\_NAME** - имя автора сообщения; * **POST\_DATE** - дата создания сообщения; * **FORUM\_ID** - ID форума; * **TOPIC\_ID** - ID темы; * **APPROVED** - опубликовано; * **ID** - ID сообщения;  Направление сортировки может принимать значения:  * **ASC** - по возрастанию; * **DESC** - по убыванию;  Необязательный. По умолчанию равен Array("ID"=>"ASC") |  |
| arFilter | Массив вида *array("фильтруемое поле"=>"значение фильтра" [, ...])*. Фильтруемое поле может принимать значения:  * **ID** - ID сообщения; * **AUTHOR\_NAME** - имя автора сообщения; * **AUTHOR\_ID** - ID автора сообщения; * **FORUM\_ID** - ID форума; * **TOPIC\_ID** - ID темы; * **APPROVED** - опубликовано; * **PARAM1** - первый параметр элемента; * **PARAM2** - второй параметр элемента; * **AUTHOR\_NAME** - имя автора сообщения; * **POST\_MESSAGE\_CHECK** - проверка текста сообщения; * **APPROVED** - опубликовано; * **NEW\_TOPIC** - новая тема; * **ATTACH\_IMG** - присоединенная картинка; * **EDIT\_DATE** - дата редактирования сообщения; * **POST\_DATE** - дата создания сообщения;  Перед названием фильтруемого поля может быть указан тип фильтрации:  * "!" - не равно * "<" - меньше * "<=" - меньше либо равно * ">" - больше * ">=" - больше либо равно  Необязательное. По умолчанию записи не фильтруются. |  |
| bCount | Если параметр равен True, то возвращается только количество сообщений, которое соответствует установленному фильтру. Необязательный. По умолчанию равен False. |  |
| iNum | Ограничение числа возвращаемых записей. Если параметр iNum отличен от нуля, то возвращается не более iNum записей. Поддерживается не для всех баз данных. Если параметр не поддерживается, то его установки игнорируются. Необязательный. По умолчанию равен 0. |  |
| arAddParams | Массив добавления параметров. | 4.0.3 |

#### Возвращаемое значение

Возвращается объект [CDBResult](/api_help/main/reference/cdbresult/index.php)

### Смотрите также

* [CDBResult](/api_help/main/reference/cdbresult/index.php)
* [Поля сообщения](/api_help/forum/fields.php#cforummessage)

### Примеры использования

```
<?
// выберем все опубликованные сообщения темы с кодом $TID в порядке поступления
$db_res = CForumMessage::GetList(array("ID"=>"ASC"), array("TOPIC_ID"=>$TID));
while ($ar_res = $db_res->Fetch())
{
	echo $ar_res["POST_MESSAGE"]."<br>";
}
?>Копировать
```

```
<?
//вывести сообщения, не из форумов с ID 12 и 45.
'!@FORUM_ID' => array(12, 45),
?>Копировать
```

```
<?
// Фильтрация по дате сообщения:
$db_res = CForumMessage::GetList(array("ID"=>"ASC"), array(">=POST_DATE" => "23.12.2010", "<=POST_DATE" => "24.12.2010"));
?>Копировать
```

Новинки документации в соцсетях: