[Интернет-магазин](/api_help/sale/index.php)

[Классы](/api_help/sale/classes/index.php)

[CSaleDiscount](/api_help/sale/classes/csalediscount/index.php)

Add (доступен с 4.0.6)

Add
===

```
int
CSaleDiscount::Add(
	array arFields
);Копировать
```

Метод добавляет новую скидку на сумму заказа с параметрами из массива
 *arFields*. Нестатический метод.

#### Параметры вызова

| Параметр | Описание |
| --- | --- |
| arFields | Ассоциативный массив параметров скидки, ключами в котором являются названия параметров скидки, а значениями - значения параметров.   Допустимые ключи:  * **LID** - идентификатор сайта; * **NAME** - название; * **ACTIVE\_FROM** - дата и время начала действия в формате сайта (если не указано, то действует с момента создания); * **ACTIVE\_TO** - дата и время окончания действия в формате сайта (если не указано, то ограничения по времени не имеет); * **ACTIVE** - флаг активности; * **PRIORITY** - приоритет применимости (чем выше, тем раньше применится); * **SORT** - сортировка в рамках одного значения приоритета (чем меньше, тем раньше применится в рамках одного приоритета); * **LAST\_DISCOUNT** - флаг "Прекратить применение скидок". Если правило применилось и флаг стоит, все последующие скидки не будут использованы (независимо от того, совпадают их условия или нет); * **LAST\_LEVEL\_DISCOUNT** - флаг "Прекратить уровень". Аналогичен предыдущему, но отменяет только последующие правила с таким же приоритетом; * **XML\_ID** - внешний код; * **CONDITIONS** - массив, описывающий дополнительные условия правила; * **ACTIONS** - массив, описывающий действия правила; * **USER\_GROUPS** - массив групп пользователей, на которых распространяется правило (не может быть пустым); * **CURRENCY** - с версии 14.0 принудительно содержит валюту сайта; * **PRICE\_FROM** - общая стоимость заказа, начиная с которой предоставляется эта скидка. Устаревшее поле с 14.0, значение жестко переопределяются при добавлении; * **PRICE\_TO** - общая стоимость заказа, до достижения которой предоставляется эта скидка. Устаревшее поле с 14.0, значение жестко переопределяются при добавлении; * **DISCOUNT\_VALUE** - величина скидки. Устаревшее поле с 14.0, значение жестко переопределяются при добавлении; * **DISCOUNT\_TYPE** - тип величины скидки (P - величина задана в процентах, V - величина задана в абсолютной   сумме). Устаревшее поле с 14.0, значение жестко переопределяются при добавлении;   Блок купонов:* **COUPON\_ADD** - создать купоны одного типа при добавлении правила или нет (Y/N); * **COUPON\_COUNT** - число создаваемых купонов; * **COUPON** - массив, описывающий купон:   + **TYPE** - тип купона (Y - купон на одну позицию заказа, O - купон на один заказ, N - многоразовый купон);   + **ACTIVE\_FROM** - дата и время начала активности купона в формате сайта либо null;   + **ACTIVE\_TO** - дата и время окончания активности купона в формате сайта либо null;   + **MAX\_USE** - максимальное число использования купона (для многоразовых) либо 0. |

#### Возвращаемые значения

Возвращается код добавленной скидки или *false* в случае ошибки.

Новинки документации в соцсетях: