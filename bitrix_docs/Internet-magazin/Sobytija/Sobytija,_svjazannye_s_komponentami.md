[Интернет-магазин](/api_help/sale/index.php)

[События](/api_help/sale/events/index.php)

События, связанные с компонентами

События, связанные с компонентами
=================================

**Примечание:** перечисленные ниже события устарели с версии 16.0.15, но в продукте сохранена обратная совместимость. Так как новый компонент **sale.order.ajax** использует новое АПИ магазина для расчета данных заказа (объект [\Bitrix\Sale\Order](https://dev.1c-bitrix.ru/api_d7/bitrix/sale/order/index.php)), для модификации заказа следует использовать [новые события компонента](https://dev.1c-bitrix.ru/api_d7/bitrix/sale/events/event_sale_order_ajax.php).

| Событие | Описание и параметры | Метод | С версии |
| --- | --- | --- | --- |
| OnSaleComponentOrderOneStepPersonType | Вызывается в компоненте **bitrix:sale.order.ajax** после формирования списка доступных типов плательщика, может быть использовано для модификации данных.   **Параметры**  |  |  | | --- | --- | | *&arResult* | Массив arResult компонента | | *&arUserResult* | Массив arUserResult компонента, содержащий текущие выбранные пользовательские данные. | | *arParams* | Массив параметров компонента | |  | 11.0.0 |
| OnSaleComponentOrderOneStepOrderProps | Вызывается в компоненте **bitrix:sale.order.ajax** после формирования списка доступных свойств заказа, может быть использовано для модификации данных.   **Параметры**  |  |  | | --- | --- | | *&arResult* | Массив arResult компонента | | *&arUserResult* | Массив arUserResult компонента, содержащий текущие выбранные пользовательские данные | | *arParams* | Массив параметров компонента | |  | 11.0.0 |
| OnSaleComponentOrderOneStepDelivery | Вызывается в компоненте **bitrix:sale.order.ajax** после формирования списка доступных служб доставки, может быть использовано для модификации данных.   **Параметры**  |  |  | | --- | --- | | *&arResult* | Массив arResult компонента | | *&arUserResult* | Массив arUserResult компонента, содержащий текущие выбранные пользовательские данные | | *arParams* | Массив параметров компонента | |  | 11.0.0 |
| OnSaleComponentOrderOneStepPaySystem | Вызывается в компоненте **bitrix:sale.order.ajax** после формирования списка доступных платежных систем, может быть использовано для модификации данных.   **Параметры**  |  |  | | --- | --- | | *&arResult* | Массив arResult компонента | | *&arUserResult* | Массив arUserResult компонента, содержащий текущие выбранные пользовательские данные. | | *arParams* | Массив параметров компонента | |  | 11.0.0 |
| OnSaleComponentOrderOneStepProcess | Вызывается в компоненте **bitrix:sale.order.ajax** после формирования всех данных компонента на этапе заполнения формы заказа, может быть использовано для модификации данных.   **Параметры**  |  |  | | --- | --- | | *&arResult* | Массив arResult компонента | | *&arUserResult* | Массив arUserResult компонента, содержащий текущие выбранные пользовательские данные | | *arParams* | Массив параметров компонента | |  | 11.0.0 |
| OnSaleComponentOrderOneStepComplete | Вызывается в компоненте **bitrix:sale.order.ajax** после создания заказа и всех его параметров, после отправки письма, но до редиректа на страницу с информацией о созданном заказе и оплате заказа.   **Параметры**  |  |  | | --- | --- | | *ID* | Идентификатор заказа | | *arOrder* | Массив полей заказа | | *arParams* | Массив параметров компонента | | CSaleOrder::DoSaveOrder | 11.0.0 |
| OnSaleComponentOrderOneStepFinal | Вызывается в компоненте **bitrix:sale.order.ajax** после создания заказа и всех его параметров, после отправки письма, перед выводом страницы об успешно созданном заказе и оплате заказа.   **Параметры**  |  |  | | --- | --- | | *ID* | Идентификатор заказа | | *arOrder* | Массив полей заказа | | *arParams* | Массив параметров компонента | |  | 11.0.0 |
| OnSaleComponentOrderComplete | Вызывается в компоненте **bitrix:sale.order.full** после создания заказа и всех его параметров.   **Параметры**  |  |  | | --- | --- | | *ID* | Идентификатор заказа | | *arOrder* | Массив полей заказа | | *arParams* | Массив параметров компонента | |  | 8.0.0 |
| OnSaleComponentOrderOneStepDiscountBefore | Вызывается в компоненте **bitrix:sale.order.ajax** перед подсчётом скидки при оформлении заказа. Можно использовать в том числе для присвоения/отъёма у пользователя купонов соответствующих скидок для расчёта индивидуальной скидки.   **Параметры**  |  |  | | --- | --- | | *arResult* | Массив параметров заказа | | *arUserResult* | Массив параметров пользователя | | *arParams* | Массив параметров компонента | |  | 12.0.0 |
| OnOrderNewSendEmail | Вызывается перед отправкой письма о новом заказе. Если возвращает *false*, отправка письма будет прервана.   **Параметры**  |  |  | | --- | --- | | *ID* | ID заказа | | *eventName* | Тип события (может быть изменено) | | *arFields* | Массив полей письма (может быть изменено). | | CSaleOrder::DoSaveOrder | 11.0.0 |

Новинки документации в соцсетях: