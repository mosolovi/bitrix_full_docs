[Интернет-магазин](/api_help/sale/index.php)

[События](/api_help/sale/events/index.php)

События, связанные с изменением заказов

События, связанные с изменением заказов
=======================================

**Примечание:** перечисленные ниже события устарели с версии 15.5.0, но в продукте сохранена обратная совместимость. Поэтому их можно использовать, если в настройках модуля **Интернет-магазин** отмечена опция **Включить обработку устаревших событий**. Либо вы можете использовать [события нового ядра](http://dev.1c-bitrix.ru/api_d7/bitrix/sale/events/index.php).

  

| Событие | Описание и параметры | Метод | С версии | До версии |
| --- | --- | --- | --- | --- |
| OnBeforeOrderAdd | Вызывается перед добавлением заказа, может быть использовано для отмены или модификации данных.   **Параметры**  |  |  | | --- | --- | | *&arFields* | Массив полей заказа | | [Add](/api_help/sale/classes/csaleorder/csaleorder__add.5a463c02.php) | 4.0.6 | 15.5.0 |
| OnOrderAdd | Вызывается после добавления заказа.   **Параметры**  |  |  | | --- | --- | | *ID* | Идентификатор добавленного заказа | | *arFields* | Массив полей заказа | | [Add](/api_help/sale/classes/csaleorder/csaleorder__add.5a463c02.php) | 4.0.6 | 15.5.0 |
| OnOrderSave | Вызывается после обработки свойств заказа. Отличается от OnOrderAdd тем, что сохраняются не только поля заказа, но и свойства заказа.   **Параметры**  |  |  | | --- | --- | | *orderId* | Идентификатор добавленного заказа. | | *fields* | Массив полей заказа и дополнительные функциональные поля, влияющие на заказ. | | *orderFields* | Массив свойств заказа. | | *isNew* | Флаг, является ли заказ новым (true/false). | | [DoSaveOrder](/api_help/sale/classes/csaleorder/dosaveorder.php) | 14.5.14 | 15.5.0 |
| OnBeforeOrderUpdate | Вызывается перед изменением заказа, может быть использовано для отмены или модификации данных.   **Параметры**  |  |  | | --- | --- | | *ID* | Идентификатор заказа | | *arFields* | Массив полей заказа | | [Update](/api_help/sale/classes/csaleorder/csaleorder__update.a8be5ffa.php) | 4.0.6 | 15.5.0 |
| OnOrderUpdate | Вызывается после изменения заказа.   **Параметры**  |  |  | | --- | --- | | *ID* | Идентификатор заказа | | *arFields* | Массив полей заказа | | [Update](/api_help/sale/classes/csaleorder/csaleorder__update.a8be5ffa.php) | 4.0.6 | 15.5.0 |
| OnBeforeOrderDelete | Вызывается перед удалением заказа, может быть использовано для отмены.   **Параметры**  |  |  | | --- | --- | | *ID* | Идентификатор заказа | | [Delete](/api_help/sale/classes/csaleorder/csaleorder__delete.f9925f50.php) | 4.0.6 | 15.5.0 |
| OnOrderDelete | вызывается после удаления заказа   **Параметры**  |  |  | | --- | --- | | *ID* | Идентификатор заказа | | *Success* | Индикатор успешности. Выводит *true*, если удаление произошло успешно. И *false*, если удаление заказа не произошло (например, не удалось удалить корзину заказа, или подписку по заказу). | | [Delete](/api_help/sale/classes/csaleorder/csaleorder__delete.f9925f50.php) | 4.0.6 | 15.5.0 |
| OnSaleCalculateOrder | Вызывается после калькуляции заказа. В событии передается &arOrder, те можно вносить правки в массив заказа в обработчике события.   **Параметры**  |  |  | | --- | --- | | *arOrder* | Массив параметров заказа | | CSaleOrder::DoCalculateOrder | 11.5.0 | 15.5.0 |
| OnSaleCalculateOrderDiscount | Вызывается после расчёта скидки на заказ.   **Параметры**  |  |  | | --- | --- | | *arOrder* | Массив параметров заказа | | CSaleOrder::DoCalculateOrder | 11.5.0 | 15.5.0 |
| OnSaleCalculateOrderDelivery | Вызывается после расчёта доставки.   **Параметры**  |  |  | | --- | --- | | *arOrder* | Массив параметров заказа | | CSaleOrder::DoCalculateOrder | 11.5.0 | 15.5.0 |
| OnSaleCalculateOrderDeliveryTax | Вызывается после расчёта налога на доставку.   **Параметры**  |  |  | | --- | --- | | *arOrder* | Массив параметров заказа | | CSaleOrder::DoCalculateOrder | 11.5.0 | 15.5.0 |
| OnSaleCalculateOrderPaySystem | Вызывается после определения платёжной системы.   **Параметры**  |  |  | | --- | --- | | *arOrder* | Массив параметров заказа | | CSaleOrder::DoCalculateOrder | 11.5.0 | 15.5.0 |
| OnSaleCalculateOrderPersonType | Вызывается после определения типа плательщика.   **Параметры**  |  |  | | --- | --- | | *arOrder* | Массив параметров заказа | | CSaleOrder::DoCalculateOrder | 11.5.0 | 15.5.0 |
| OnSaleCalculateOrderProps | Вызывается после формирования свойств плательщика.   **Параметры**  |  |  | | --- | --- | | *arOrder* | Массив параметров заказа | | CSaleOrder::DoCalculateOrder | 11.5.0 | 15.5.0 |
| OnSaleCalculateOrderShoppingCart | Вызывается после формирования массива заказа из корзины.   **Параметры**  |  |  | | --- | --- | | *arOrder* | Массив параметров заказа | | CSaleOrder::DoCalculateOrder | 11.5.0 | 15.5.0 |
| OnSaleCalculateOrderShoppingCartTax | Вызывается после определения налогов.   **Параметры**  |  |  | | --- | --- | | *arOrder* | Массив параметров заказа | | CSaleOrder::DoCalculateOrder | 11.5.0 | 15.5.0 |

Новинки документации в соцсетях: